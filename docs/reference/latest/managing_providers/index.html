<!DOCTYPE html>
<html>

  <head>
  <!DOCTYPE html>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ManageIQ</title>
  <meta name="description" content="">
  <meta property="og:image" content="http://manageiq.org/assets/images/logo/manageiq-logo-blue.png" />

  <link type="text/css" rel="stylesheet" href="/assets/main-8de063b063e781c83c3900f2fb42692885edeac0346d54e22467184ccc393942.css">
  <link rel="canonical" href="http://manageiq.org/docs/reference/latest/managing_providers/">
  <link rel="alternate" type="application/rss+xml" title="ManageIQ" href="http://manageiq.org/feed.xml">

  <link href="/assets/images/favicon.ico" rel="shortcut icon">
</head>


  <body>
    <header class="site-header">
  <a href="/" class="brand">
    <span class="brand-name">ManageIQ</span>
    <img class="brand-logo" src="/assets/images/manageiq-logo-inverse.svg" alt="ManageIQ Logo">
  </a>

  <div id="site_header-nav_toggle">
    <a href="#" class="off_canvas-show" data-behavior="off_canvas-toggle">
      <i class="fa fa-bars"></i>
    </a>
  </div>

  <div class="off_canvas">
    <header class="off_canvas-header">
      <a href="#" class="off_canvas-hide" data-behavior="off_canvas-toggle">
        <i class="fa fa-times"></i>
      </a>
    </header>

    <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
</ul>

  </div>
</header>


    <main data-url="/docs/reference/latest/managing_providers/index">
      <nav class="doc_tabs">
  <ul>
  <li>
    <a href="/docs/get-started/">Get Started</a>
  </li>
  <li class="active">
    <a href="/docs/reference/">User Reference</a>
  </li>
  <li>
    <a href="/docs/automation">
      Automation Book
    </a>
  </li>
  <li>
    <a href="/docs/api">
      API Docs
    </a>
  </li>
  <li>
    <a href="/docs/guides/README">Developer Guides</a>
  </li>
</ul>

    <div class="col-lg-4 col-md-4 col-sm-12 pull-right" style="margin-top: 10px">
        <script async src="https://cse.google.com/cse.js?cx=006042792541147862616:dfkijfebdts"></script>
         <div class="gcse-search"></div>
    </div>
</nav>

<script>
  window.onload = demo;
	function demo() {
	    document.getElementById("gsc-i-id1").setAttribute("placeholder", "Search Documentation")
	}
</script>

<div class="doc_container">
  <div class="doc_menu">
    
    

<div class="doc_menu-heading">
  Latest
</div>

<ul class="menu menu-toplevel" id=ref_menu_latest>


  <li class="menu-parent">
    
    <a href="#">
      Installation
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_aws/index.html">
      Amazon Web Services (AWS)
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_kubernetes/index.html">
      Kubernetes
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_ibm_cloud/index.html">
      IBM Cloud
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_microsoft_azure/index.html">
      Microsoft Azure
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_google_compute_engine/index.html">
      Google Compute Engine
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_vmware_vsphere/index.html">
      VMware vSphere
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_red_hat_enterprise_linux_openstack_platform/index.html">
      Red Hat Enterprise OpenStack Platform
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_red_hat_virtualization/index.html">
      Red Hat Enterprise Virtualization
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/installing_on_scvmm/index.html">
      Microsoft System Center Virtual Machine Manager (SCVMM)
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Configuration
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/deployment_planning_guide/index.html">
      Deployment Planning Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/general_configuration/index.html">
      General Configuration
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/high_availability_guide/index.html">
      High Availability Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/appliance_hardening_guide/index.html">
      Appliance Hardening Guide
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Administration
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/monitoring_alerts_and_reporting/index.html">
      Monitoring, Alerts, and Reporting
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/policies_and_profiles_guide/index.html">
      Policies and Profiles Guide
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/managing_infrastructure_and_inventory/index.html">
      Managing Infrastructure and Inventory
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item active">
    <a href="/docs/reference/latest/managing_providers/index.html">
      Managing Providers
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/provisioning_virtual_machines_and_hosts/index.html">
      Provisioning Virtual Machines and Hosts
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/scripting_actions/index.html">
      Scripting Actions in ManageIQ
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Authentication
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/active_directory.html">
      Active Directory
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/ipa_2fa.html">
      2-Factor-Authentication with IPA
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/ipa_ad_trust.html">
      IPA/AD Trust
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/ldap.html">
      LDAP
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/saml.html">
      SAML
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/auth/openid_connect.html">
      OpenID-Connect
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Integration
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/integration_with_aws_cloudformation_and_openstack_heat/index.html">
      AWS CloudFormation and OpenStack Heat
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/integration_with_servicenow/index.html">
      ServiceNow
    </a>
    
  </li>


      </ul>
    
  </li>


  <li class="menu-parent">
    
    <a href="#">
      Reference
    </a>
    
    
      <ul>
        



  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/capabilities_matrix/index.html">
      Capabilities Matrix
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/rest_api/index.html">
      ManageIQ REST API
    </a>
    
  </li>

  
  
  
  <li class="doc_menu-item">
    <a href="/docs/reference/latest/methods_available_for_automation/index.html">
      Methods Available for Automation
    </a>
    
  </li>


      </ul>
    
  </li>

</ul>

    
  </div>
  <div class="doc_main">
    <article class="doc user_doc">
      

      <div class="doc-content">
        
        <div class="doc-versions">
          <span class="label">Versions: </span>
          
            <span class="active" >
              <a href="/docs/reference/latest/managing_providers/index.html">
                Latest
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/jansa/managing_providers/index.html">
                Jansa
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/ivanchuk/doc-Managing_Providers/miq/index.html">
                Ivanchuk
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/hammer/doc-Managing_Providers/miq/index.html">
                Hammer
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/gaprindashvili/doc-Managing_Providers/miq/index.html">
                Gaprindashvili
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/fine/doc-Managing_Providers/miq/index.html">
                Fine
              </a>
            </span>
            
              <span class="separator">/</span>
            
          
            <span>
              <a href="/docs/reference/euwe/doc-Managing_Providers/miq/index.html">
                Euwe
              </a>
            </span>
            
          
        </div>
        
        <ul class="section-nav">
<li class="toc-entry toc-h1"><a href="#managing-providers">Managing Providers</a></li>
<li class="toc-entry toc-h1"><a href="#infrastructure-providers">Infrastructure Providers</a></li>
<li class="toc-entry toc-h1"><a href="#discovering-infrastructure-providers">Discovering Infrastructure Providers</a></li>
<li class="toc-entry toc-h1"><a href="#discovering-physical-infrastucture-providers">Discovering Physical Infrastucture Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#red-hat-virtualization-providers">Red Hat Virtualization Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#enabling-red-hat-virtualization-capacity-and-utilization-data-collection">Enabling Red Hat Virtualization Capacity and Utilization Data Collection</a></li>
<li class="toc-entry toc-h1"><a href="#adding-a-red-hat-virtualization-provider">Adding a Red Hat Virtualization Provider</a></li>
<li class="toc-entry toc-h1"><a href="#authenticating-red-hat-virtualization-hosts">Authenticating Red Hat Virtualization Hosts</a>
<ul>
<li class="toc-entry toc-h2"><a href="#openstack-infrastructure-providers">OpenStack Infrastructure Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#adding-an-openstack-infrastructure-provider">Adding an OpenStack Infrastructure Provider</a>
<ul>
<li class="toc-entry toc-h2"><a href="#configuring-the-undercloud-to-store-events">Configuring the Undercloud to Store Events</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#discovering-openstack-infrastructure-providers">Discovering OpenStack Infrastructure Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#vmware-vcenter-providers">VMware vCenter Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#adding-a-vmware-vcenter-provider">Adding a VMware vCenter Provider</a></li>
<li class="toc-entry toc-h1"><a href="#using-a-non-administrator-account-for-vcenter-hosts">Using a Non-Administrator Account for vCenter Hosts</a></li>
<li class="toc-entry toc-h1"><a href="#authenticating-vmware-vcenter-hosts">Authenticating VMware vCenter Hosts</a>
<ul>
<li class="toc-entry toc-h2"><a href="#microsoft-scvmm-providers">Microsoft SCVMM Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#authenticating-to-microsoft-scvmm">Authenticating to Microsoft SCVMM</a></li>
<li class="toc-entry toc-h1"><a href="#adding-a-microsoft-scvmm-provider">Adding a Microsoft SCVMM Provider</a></li>
<li class="toc-entry toc-h1"><a href="#refreshing-providers">Refreshing Providers</a></li>
<li class="toc-entry toc-h1"><a href="#tagging-multiple-providers">Tagging Multiple Providers</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-a-provider">Viewing a Provider</a></li>
<li class="toc-entry toc-h1"><a href="#removing-a-provider">Removing a Provider</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-the-provider-timeline">Viewing the Provider Timeline</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-hosts-and-clusters">Viewing Hosts and Clusters</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-virtual-machines-and-templates">Viewing Virtual Machines and Templates</a></li>
<li class="toc-entry toc-h1"><a href="#configuration-management-providers">Configuration Management Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#red-hat-satellite-6">Red Hat Satellite 6</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#defining-the-workflow">Defining the Workflow</a></li>
<li class="toc-entry toc-h1"><a href="#defining-the-hostgroup-hierarchy">Defining the Hostgroup Hierarchy</a></li>
<li class="toc-entry toc-h1"><a href="#adding-a-satellite-6-provider">Adding a Satellite 6 Provider</a></li>
<li class="toc-entry toc-h1"><a href="#triggering-a-refresh-of-a-satellite-6-provider">Triggering a Refresh of a Satellite 6 Provider</a></li>
<li class="toc-entry toc-h1"><a href="#displaying-red-hat-satellite-6-contents">Displaying Red Hat Satellite 6 Contents</a></li>
<li class="toc-entry toc-h1"><a href="#reprovisioning-a-bare-metal-host">Reprovisioning a Bare Metal Host</a></li>
<li class="toc-entry toc-h1"><a href="#tagging-a-bare-metal-host">Tagging a Bare Metal Host</a></li>
<li class="toc-entry toc-h1"><a href="#automation-management-providers">Automation Management Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#ansible">Ansible</a>
<ul>
<li class="toc-entry toc-h3"><a href="#enabling-the-embedded-ansible-server-role">Enabling the Embedded Ansible Server Role</a></li>
<li class="toc-entry toc-h3"><a href="#verifying-the-embedded-ansible-worker-state">Verifying the Embedded Ansible Worker State</a></li>
<li class="toc-entry toc-h3"><a href="#adding-a-playbook-repository">Adding a Playbook Repository</a></li>
<li class="toc-entry toc-h3"><a href="#refreshing-repositories">Refreshing Repositories</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#credentials">Credentials</a>
<ul>
<li class="toc-entry toc-h2"><a href="#adding-credentials">Adding Credentials</a></li>
<li class="toc-entry toc-h2"><a href="#credential-types">Credential Types</a>
<ul>
<li class="toc-entry toc-h3"><a href="#machine">Machine</a></li>
<li class="toc-entry toc-h3"><a href="#network">Network</a></li>
<li class="toc-entry toc-h3"><a href="#scm">SCM</a></li>
<li class="toc-entry toc-h3"><a href="#amazon">Amazon</a></li>
<li class="toc-entry toc-h3"><a href="#azure-classic-deprecated">Azure Classic (deprecated)</a></li>
<li class="toc-entry toc-h3"><a href="#azure">Azure</a></li>
<li class="toc-entry toc-h3"><a href="#openstack">OpenStack</a></li>
<li class="toc-entry toc-h3"><a href="#rackspace">Rackspace</a></li>
<li class="toc-entry toc-h3"><a href="#red-hat-virtualization">Red Hat Virtualization</a></li>
<li class="toc-entry toc-h3"><a href="#satellite-6">Satellite 6</a></li>
<li class="toc-entry toc-h3"><a href="#vmware">VMware</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#tagging-ansible-playbooks-repositories-and-credentials">Tagging Ansible Playbooks, Repositories, and Credentials</a>
<ul>
<li class="toc-entry toc-h2"><a href="#adding-tags-to-ansible-playbooks">Adding Tags to Ansible Playbooks</a></li>
<li class="toc-entry toc-h2"><a href="#adding-tags-to-ansible-repositories">Adding Tags to Ansible Repositories</a></li>
<li class="toc-entry toc-h2"><a href="#adding-tags-to-ansible-credentials">Adding Tags to Ansible Credentials</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#optimizing-ansible-playbooks-for-manageiq">Optimizing Ansible Playbooks for ManageIQ</a>
<ul>
<li class="toc-entry toc-h2"><a href="#installing-roles-on-an-embedded-ansible-appliance">Installing Roles on an Embedded Ansible Appliance</a></li>
<li class="toc-entry toc-h2"><a href="#ansible-service-linking">Ansible Service Linking</a>
<ul>
<li class="toc-entry toc-h3"><a href="#example-linking-a-virtual-machine-to-a-service">Example: Linking a virtual machine to a service</a></li>
<li class="toc-entry toc-h3"><a href="#modifying-the-automate-workspace-using-the-manageiq-automate-role">Modifying the Automate Workspace Using the manageiq-automate Role.</a>
<ul>
<li class="toc-entry toc-h4"><a href="#role-variables">Role Variables</a></li>
<li class="toc-entry toc-h4"><a href="#example-playbook">Example Playbook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#callbacks-in-multiple-appliance-environments">Callbacks in Multiple Appliance Environments</a>
<ul>
<li class="toc-entry toc-h3"><a href="#ansible-tower">Ansible Tower</a>
<ul>
<li class="toc-entry toc-h4"><a href="#working-with-an-ansible-tower-provider">Working with an Ansible Tower Provider</a></li>
<li class="toc-entry toc-h4"><a href="#adding-an-ansible-tower-provider">Adding an Ansible Tower Provider</a></li>
<li class="toc-entry toc-h4"><a href="#refreshing-an-ansible-tower-provider">Refreshing an Ansible Tower Provider</a></li>
<li class="toc-entry toc-h4"><a href="#viewing-ansible-tower-providers-and-inventory">Viewing Ansible Tower Providers and Inventory</a></li>
<li class="toc-entry toc-h4"><a href="#viewing-ansible-tower-configured-systems">Viewing Ansible Tower Configured Systems</a></li>
<li class="toc-entry toc-h4"><a href="#executing-an-ansible-tower-job-or-workflow-template-from-a-service-catalog">Executing an Ansible Tower Job or Workflow Template from a Service Catalog</a></li>
<li class="toc-entry toc-h4"><a href="#executing-an-ansible-tower-job-using-a-custom-automate-button">Executing an Ansible Tower Job Using a Custom Automate Button</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#cloud-providers">Cloud Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#openstack-providers">OpenStack Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#adding-openstack-providers">Adding OpenStack Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#configuring-the-overcloud-to-store-events">Configuring the Overcloud to Store Events</a></li>
<li class="toc-entry toc-h2"><a href="#azure-providers">Azure Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#adding-azure-providers">Adding Azure Providers</a></li>
<li class="toc-entry toc-h1"><a href="#disabling-azure-cloud-regions">Disabling Azure Cloud Regions</a>
<ul>
<li class="toc-entry toc-h2"><a href="#amazon-ec2-providers">Amazon EC2 Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#permissions-for-amazon-ec2-providers">Permissions for Amazon EC2 Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#manually-creating-an-amazon-ec2-role">Manually Creating an Amazon EC2 Role</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#adding-amazon-ec2-providers">Adding Amazon EC2 Providers</a></li>
<li class="toc-entry toc-h1"><a href="#enabling-public-amis-from-amazon-ec2">Enabling Public AMIs from Amazon EC2</a></li>
<li class="toc-entry toc-h1"><a href="#enabling-aws-config-notifications">Enabling AWS Config Notifications</a></li>
<li class="toc-entry toc-h1"><a href="#enabling-amazon-ec2-events">Enabling Amazon EC2 Events</a>
<ul>
<li class="toc-entry toc-h2"><a href="#creating-a-cloudtrail">Creating a CloudTrail</a></li>
<li class="toc-entry toc-h2"><a href="#creating-cloudwatch-rules-based-on-event-patterns">Creating CloudWatch Rules Based on Event Patterns</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#disabling-amazon-cloud-regions">Disabling Amazon Cloud Regions</a></li>
<li class="toc-entry toc-h1"><a href="#refreshing-cloud-providers">Refreshing Cloud Providers</a></li>
<li class="toc-entry toc-h1"><a href="#tagging-cloud-providers">Tagging Cloud Providers</a></li>
<li class="toc-entry toc-h1"><a href="#removing-cloud-providers">Removing Cloud Providers</a></li>
<li class="toc-entry toc-h1"><a href="#editing-a-cloud-provider">Editing a Cloud Provider</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-a-cloud-providers-timeline">Viewing a Cloud Provider’s Timeline</a>
<ul>
<li class="toc-entry toc-h2"><a href="#ibm-power-systems-virtual-servers-providers">IBM Power Systems Virtual Servers Providers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#ibm-power-systems-virtual-servers">IBM Power Systems Virtual Servers</a></li>
<li class="toc-entry toc-h1"><a href="#adding-ibm-power-systems-virtual-servers-providers">Adding IBM Power Systems Virtual Servers Providers</a></li>
<li class="toc-entry toc-h1"><a href="#network-managers">Network Managers</a></li>
<li class="toc-entry toc-h1"><a href="#adding-or-viewing-network-providers">Adding or Viewing Network Providers</a></li>
<li class="toc-entry toc-h1"><a href="#refreshing-network-providers">Refreshing Network Providers</a></li>
<li class="toc-entry toc-h1"><a href="#tagging-network-providers">Tagging Network Providers</a></li>
<li class="toc-entry toc-h1"><a href="#removing-network-providers">Removing Network Providers</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-a-network-providers-timeline">Viewing a Network Provider’s Timeline</a></li>
<li class="toc-entry toc-h1"><a href="#using-the-topology-widget-for-network-providers">Using the Topology Widget for Network Providers</a></li>
<li class="toc-entry toc-h1"><a href="#containers-providers">Containers Providers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#obtaining-an-openshift-container-platform-management-token">Obtaining an OpenShift Container Platform Management Token</a></li>
<li class="toc-entry toc-h2"><a href="#enabling-openshift-cluster-metrics">Enabling OpenShift Cluster Metrics</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#adding-an-openshift-container-platform-provider">Adding an OpenShift Container Platform Provider</a></li>
<li class="toc-entry toc-h1"><a href="#tagging-containers-providers">Tagging Containers Providers</a></li>
<li class="toc-entry toc-h1"><a href="#removing-containers-providers">Removing Containers Providers</a></li>
<li class="toc-entry toc-h1"><a href="#editing-a-containers-provider">Editing a Containers Provider</a></li>
<li class="toc-entry toc-h1"><a href="#hiding-environment-variables-for-containers-providers">Hiding Environment Variables for Containers Providers</a></li>
<li class="toc-entry toc-h1"><a href="#viewing-a-containers-providers-timeline">Viewing a Containers Provider’s Timeline</a></li>
<li class="toc-entry toc-h1"><a href="#storage-managers">Storage Managers</a>
<ul>
<li class="toc-entry toc-h2"><a href="#amazon-elastic-block-store-managers">Amazon Elastic Block Store Managers</a></li>
<li class="toc-entry toc-h2"><a href="#openstack-block-storage-managers">OpenStack Block Storage Managers</a></li>
<li class="toc-entry toc-h2"><a href="#openstack-block-storage-manager-targeted-refresh">OpenStack Block Storage Manager Targeted Refresh</a></li>
<li class="toc-entry toc-h2"><a href="#openstack-object-storage-managers">OpenStack Object Storage Managers</a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#viewing-object-stores">Viewing Object Stores</a></li>
<li class="toc-entry toc-h1"><a href="#appendix">Appendix</a>
<ul>
<li class="toc-entry toc-h2"><a href="#using-a-self-signed-ca-certificate">Using a Self-Signed CA Certificate</a></li>
</ul>
</li>
</ul><h1 id="managing-providers">
<a class="anchor" href="#managing-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Managing Providers</h1>

<p>ManageIQ can manage a variety of external environments, known as providers and managers. A provider or manager is any system that ManageIQ integrates with for the purpose of collecting data and performing operations.</p>

<p>In ManageIQ, a <em>provider</em> is an external virtualization, cloud, or containers environment that manages multiple virtual machines
or instances residing on multiple hosts. One example is Red Hat Virtualization, a platform that manages multiple hosts and virtual machines.</p>

<p>In ManageIQ, a <em>manager</em> is an external management environment that manages more than one type of resource. One example of a manager is OpenStack, which manages infrastucture, cloud, network, and storage resources.</p>

<p>This guide covers working with providers and managers in
ManageIQ, which include:</p>

<ul>
  <li>
    <p>Infrastructure providers</p>
  </li>
  <li>
    <p>Configuration management providers</p>
  </li>
  <li>
    <p>Automation management providers</p>
  </li>
  <li>
    <p>Cloud providers</p>
  </li>
  <li>
    <p>Networking management providers</p>
  </li>
  <li>
    <p>Middleware management providers</p>
  </li>
  <li>
    <p>Container providers</p>
  </li>
  <li>
    <p>Storage managers</p>
  </li>
</ul>

<p>For information on working with the resources contained by a provider or manager, see <a href="../managing_infrastructure_and_inventory/index.html">Managing Infrastructure and Inventory</a>.</p>

<h1 id="infrastructure-providers">
<a class="anchor" href="#infrastructure-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Infrastructure Providers</h1>

<p>In ManageIQ, an infrastructure provider is a virtual
infrastructure environment that you can add to a ManageIQ
appliance to manage and interact with the resources in that environment.
This chapter describes the different types of infrastructure providers
that you can add to ManageIQ, and how to manage them.
Infrastructure providers can be either discovered automatically by
ManageIQ, or added individually.</p>

<p>The web interface uses virtual thumbnails to represent infrastructure
providers. Each thumbnail contains four quadrants by default, which
display basic information about each provider:</p>

<p><img src="../images/2189.png" alt="2189"></p>

<ol>
  <li>
    <p>Number of hosts</p>
  </li>
  <li>
    <p>Management system software</p>
  </li>
  <li>
    <p>Currently unused</p>
  </li>
  <li>
    <p>Authentication status</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th>Icon</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="../images/2190.png" alt="2190"></td>
      <td>Validated: Valid authentication credentials have been added.</td>
    </tr>
    <tr>
      <td><img src="../images/2191.png" alt="2191"></td>
      <td>Invalid: Authentication credentials are invalid.</td>
    </tr>
    <tr>
      <td><img src="../images/2192.png" alt="2192"></td>
      <td>Unknown: Authentication status is unknown or no credentials have been entered.</td>
    </tr>
  </tbody>
</table>

<p>Provider authentication status</p>

<h1 id="discovering-infrastructure-providers">
<a class="anchor" href="#discovering-infrastructure-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Discovering Infrastructure Providers</h1>

<p>In addition to individually adding providers, you can also discover
infrastructure providers in a given subnet range.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1942.png" alt="Discover Infrastructure Providers">
(<strong>Discover Infrastructure Providers</strong>).</p>
  </li>
  <li>
    <p>Select the infrastructure provider to discover.</p>
  </li>
  <li>
    <p>Provide a <strong>Subnet Range</strong>. Enter the <strong>From Address</strong> and <strong>To
Address</strong> of the address range.</p>
  </li>
  <li>
    <p>Click <strong>Start</strong>.</p>
  </li>
</ol>

<p>The appliance searches for all infrastructure providers in the specified
subnet range, and adds them to the user interface. However, before you
can manage providers added via discovery, you must edit each provider
and specify authentication details.</p>

<h1 id="discovering-physical-infrastucture-providers">
<a class="anchor" href="#discovering-physical-infrastucture-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Discovering Physical Infrastucture Providers</h1>

<p>In addition to discovering virtual infrastructure providers,
ManageIQ has the ability to discover physical
infrastructure providers in a given subnet range.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Physical Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1942.png" alt="Discover Physical Infrastructure
Providers"> (<strong>Discover Physical Infrastructure
Providers</strong>).</p>
  </li>
  <li>
    <p>Select the provider in <strong>Discovery Type</strong>.</p>
  </li>
  <li>
    <p>Provide a <strong>Subnet Range</strong>. Enter the <strong>From Address</strong> and <strong>To
Address</strong> of the address range.</p>
  </li>
  <li>
    <p>Enter a <strong>Port</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Start</strong>.</p>
  </li>
</ol>

<p>The appliance searches for all physical infrastructure providers in the
specified subnet range, and adds them to the user interface. However,
before you can manage providers added via discovery feature, you must
edit each provider to enter authentication details.</p>

<h2 id="red-hat-virtualization-providers">
<a class="anchor" href="#red-hat-virtualization-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Red Hat Virtualization Providers</h2>

<p>To use a Red Hat Virtualization provider, add it to the appliance and
authenticate its hosts. You can also configure capacity and utilization
data collection to help track usage and find common issues.</p>

<h1 id="enabling-red-hat-virtualization-capacity-and-utilization-data-collection">
<a class="anchor" href="#enabling-red-hat-virtualization-capacity-and-utilization-data-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling Red Hat Virtualization Capacity and Utilization Data Collection</h1>

<p>Configure the following to collect capacity and utilization data from a Red Hat Virtualization provider:</p>

<ul>
  <li>
    <p>In ManageIQ, enable the capacity and utilization server roles from the settings menu, in menu:Configuration[Server&gt; Server Control]. For more information on capacity and utilization collection, see <a href="../deployment_planning_guide/index.html#assigning-the-capacity-and-utilization-server-roles">Assigning the Capacity and Utilization Server Roles</a> in the <em>Deployment Planning Guide</em>.</p>
  </li>
  <li>
    <p>For information on selecting clusters and datastores used to collect data, see <a href="../deployment_planning_guide/index.html#capacity-and-utilization-data-collected">Capacity and Utilization Data Collected</a> in the <em>General Configuration Guide</em>.</p>
  </li>
  <li>
    <p>In your Red Hat Virtualization environment, install the Data
Warehouse and Reports components, and create a ManageIQ user in the Data Warehouse database:</p>

    <ul>
      <li>
        <p>To install the Data Warehouse and Reports components in a Red Hat Virtualization environment, see the <a href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/data_warehouse_guide/">Data Warehouse Guide</a>.</p>
      </li>
      <li>
        <p>To create a ManageIQ user in the Data Warehouse database, see <a href="../deployment_planning_guide/#data_collection_for_rhev_33_34">Data Collection for Red Hat Enterprise Virtualization</a> in the <em>Deployment Planning Guide</em>.</p>
      </li>
    </ul>
  </li>
</ul>

<h1 id="adding-a-red-hat-virtualization-provider">
<a class="anchor" href="#adding-a-red-hat-virtualization-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a Red Hat Virtualization Provider</h1>

<p>After initial installation and creation of a ManageIQ
environment, add a Red Hat Virtualization provider to the appliance.</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Compute &gt; Infrastructure &gt; Providers</strong>.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1862.png" alt="Add a New Infrastructure Provider"> (<strong>Add
a New Infrastructure Provider</strong>).</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>Select <strong>Red Hat Virtualization</strong> from the <strong>Type</strong> list.</p>
  </li>
  <li>
    <p>Select the appropriate <strong>Zone</strong> for the provider. If you do not
specify a zone, it is set to <strong>default</strong>.</p>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong> in the <strong>Default</strong> tab, configure the following:</p>

    <ul>
      <li>
        <p>Enter the <strong>Hostname</strong> or IPv4 or IPv6 address of the Red Hat
Virtualization Manager.</p>

        <p><strong>Important:</strong></p>

        <p>The <strong>Hostname</strong> must be a unique fully qualified domain name.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> if your provider uses a non-standard port
for access.</p>
      </li>
      <li>
        <p>Select <strong>Yes</strong> or <strong>No</strong> to <strong>Verify TLS Certificates</strong> to
specify whether to authenticate securely to the provider using
TLS.</p>

        <ul>
          <li>If you select <strong>Yes</strong> for <strong>Verify TLS Certificates</strong>, you
can either paste a custom certificate in the <strong>Trusted CA
Certificates</strong> field in PEM format, or leave the <strong>Trusted
CA Certificates</strong> field empty if your Red Hat Virtualization
provider has a trusted Certificate Authority.</li>
        </ul>
      </li>
      <li>
        <p>Provide the login credentials for the Red Hat Virtualization
administrative user:</p>

        <ul>
          <li>
            <p>Enter the user name (formatted as <code class="language-plaintext highlighter-rouge">admin@internal</code>) in the
<strong>Username</strong> field.</p>
          </li>
          <li>
            <p>Enter the password in the <strong>Password</strong> field.</p>
          </li>
          <li>
            <p>Confirm the password in the <strong>Confirm Password</strong> field.</p>
          </li>
          <li>
            <p>Click <strong>Validate</strong> to confirm ManageIQ can
connect to the Red Hat Virtualization Manager.</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong> in the <strong>C &amp; U Database</strong> tab, you can configure capacity and utilization metrics collection by providing login credentials for the ManageIQ user of the Red Hat Virtualization Data Warehouse database. You can also configure this later by editing the provider. Configure the following in the <strong>C &amp; U Database</strong> tab:</p>

    <p><strong>Important</strong></p>

    <p>To collect capacity and utilization data from a Red Hat Virtualization provider, the capacity and utilization server roles must be enabled in ManageIQ. The Red Hat Virtualization environment must also contain the Data Warehouse and Reports components and a ManageIQ user. Specific clusters, hosts, and datastores can also be configured for
collection. See <a href="#enabling-red-hat-virtualization-capacity-and-utilization-data-collection">Enabling Red Hat Virtualization Capacity and Utilization Data Collection</a> for configuration details.</p>

    <ul>
      <li>
        <p>Enter the database hostname or IPv4 or IPv6 address in
<strong>Hostname</strong>.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> if your provider uses a non-standard port
for access.</p>
      </li>
      <li>
        <p>Enter the <strong>Database Name</strong>.</p>
      </li>
      <li>
        <p>Enter the database user name in the <strong>Username</strong> field.</p>
      </li>
      <li>
        <p>Enter the user password in the <strong>Password</strong> field.</p>
      </li>
      <li>
        <p>Confirm the user password in the <strong>Confirm Password</strong> field.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm ManageIQ can connect
to the database.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Add</strong> to finish adding the Red Hat Virtualization provider.</p>
  </li>
</ol>

<h1 id="authenticating-red-hat-virtualization-hosts">
<a class="anchor" href="#authenticating-red-hat-virtualization-hosts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authenticating Red Hat Virtualization Hosts</h1>

<p>After adding a Red Hat Virtualization infrastructure provider, you must
authenticate its hosts to enable full functionality.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click on a provider to display its summary screen.</p>
  </li>
  <li>
    <p>On the summary screen, click <strong>Hosts</strong> in the <strong>Relationships</strong>
information box to display the hosts on that provider.</p>
  </li>
  <li>
    <p>Select the hosts to authenticate. You can select all hosts using the
<strong>Check All</strong> option.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>).</p>
  </li>
  <li>
    <p>Click <img src="../images/1851.png" alt="Edit this item"> (<strong>Edit this item</strong>).</p>
  </li>
  <li>
    <p>In the <strong>Credentials</strong> area, enter credentials for the following, as
required:</p>

    <ol>
      <li>
        <p><strong>Default</strong>: This field is mandatory. Users should have
privileged access such as, root or administrator.</p>
      </li>
      <li>
        <p><strong>Remote Login</strong>: Credentials for this field are required if SSH
login is disabled for the <strong>Default</strong> account.</p>
      </li>
      <li>
        <p><strong>Web Services</strong>: This tab is used for access to Web Services in
Red Hat Virtualization.</p>
      </li>
      <li>
        <p><strong>IPMI</strong>: This tab is used for access to IPMI.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Validate</strong>.</p>
  </li>
  <li>
    <p>If editing multiple hosts:</p>

    <ol>
      <li>
        <p>Select a host from the <strong>Select Host to validate against</strong> list.</p>
      </li>
      <li>
        <p>If required, enter credentials for <strong>Remote Login</strong>, <strong>Web
Services</strong>, and <strong>IPMI</strong> in their respective tabs; click
<strong>Validate</strong>.</p>
      </li>
      <li>
        <p>Select another host to validate each of these credentials
against.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h2 id="openstack-infrastructure-providers">
<a class="anchor" href="#openstack-infrastructure-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenStack Infrastructure Providers</h2>

<p>Enable an OpenStack Infrastructure provider by adding it to the
appliance.</p>

<h1 id="adding-an-openstack-infrastructure-provider">
<a class="anchor" href="#adding-an-openstack-infrastructure-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding an OpenStack Infrastructure Provider</h1>

<p>After initial installation and creation of a ManageIQ
environment, add an OpenStack infrastructure provider to the appliance.
ManageIQ supports operating with the OpenStack <code class="language-plaintext highlighter-rouge">admin</code> tenant.
When creating an OpenStack infrastructure provider in ManageIQ,
select the OpenStack infrastructure provider’s <code class="language-plaintext highlighter-rouge">admin</code> user because it
is the default administrator of the OpenStack <code class="language-plaintext highlighter-rouge">admin</code> tenant. When using
the <code class="language-plaintext highlighter-rouge">admin</code> credentials, a user in ManageIQ provisions into the
<code class="language-plaintext highlighter-rouge">admin</code> tenant, and sees images, networks, and instances that are
associated with the <code class="language-plaintext highlighter-rouge">admin</code> tenant.</p>

<p><strong>Note:</strong></p>

<ul>
  <li>
    <p>You can set whether ManageIQ should use the Telemetry service or Advanced Message Queueing Protocol (AMQP) for event monitoring. If you choose Telemetry, you should first configure the <strong>ceilometer</strong> service on the undercloud to store events. See <a href="#configuring-the-undercloud-to-store-events">Configuring the Undercloud to Store Events</a> for instructions. For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/architecture_guide/#comp-telemetry">OpenStack Telemetry (ceilometer)</a> in the Red Hat OpenStack Platform <em>Architecture Guide</em>.</p>
  </li>
  <li>
    <p>To authenticate the provider using a self-signed Certificate
Authority (CA), configure the ManageIQ appliance to
trust the certificate using the steps in <a href="#app-self_signed_CA">Using a Self-Signed CA Certificate</a>
before adding the provider.</p>
  </li>
</ul>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1862.png" alt="Add a New Infrastructure Provider"> (<strong>Add
a New Infrastructure Provider</strong>).</p>
  </li>
  <li>
    <p>Enter the <strong>Name</strong> of the provider to add. The <strong>Name</strong> is how the
device is labeled in the console.</p>
  </li>
  <li>
    <p>Select <strong>OpenStack Platform Director</strong> from the <strong>Type</strong> list.</p>
  </li>
  <li>
    <p>Select the <strong>API Version</strong> of your OpenStack provider’s Keystone
service from the list. The default is <code class="language-plaintext highlighter-rouge">Keystone v2</code>.</p>

    <p><strong>Note:</strong></p>

    <ul>
      <li>With Keystone API v3, domains are used to determine administrative
boundaries of service entities in OpenStack. Domains allow you to
group users together for various purposes, such as setting
domain-specific configuration or security options. For more
information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/architecture_guide/#comp-identity">OpenStack Identity
(keystone)</a>
in the Red Hat OpenStack Platform <em>Architecture Guide</em>.</li>
    </ul>
  </li>
</ol>

<ul>
  <li>The provider you are creating will be able to see projects for the
given domain only. To see projects for other domains, add it as
another cloud provider. For more information on domain management in
OpenStack, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/users_and_identity_management_guide/#Domains">Domain
Management</a>
in the Red Hat OpenStack Platform <em>Users and Identity Management
Guide</em>.</li>
</ul>

<ol>
  <li>
    <p>Select the appropriate <strong>Zone</strong> for the provider. By default, the zone is set to <strong>default</strong>.</p>

    <p><strong>Note:</strong></p>

    <p>For more information, see the definition of host aggregates and
availability zones in <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html/architecture_guide/components#comp-compute">OpenStack Compute (nova)</a>
in the Red Hat OpenStack Platform <em>Architecture Guide</em>.</p>
  </li>
  <li>
    <p>In the <strong>Default</strong> tab, under <strong>Endpoints</strong>, configure the host and authentication details of your OpenStack provider:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to
authenticate the provider:</p>

        <ul>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider
insecurely using SSL.</p>
          </li>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted
Certificate Authority. Select this option if the provider
has a valid SSL certificate and it is signed by a trusted
Certificate Authority. No further configuration is required
for this option. This is the recommended authentication
method.</p>
          </li>
          <li>
            <p><strong>Non-SSL</strong>: Connect to the provider insecurely using only
HTTP protocol, without SSL.</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Enter the <strong>Host Name or IP address(IPv4 or IPv6)</strong> of the
provider. If your provider is an undercloud, use its hostname
(see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/director_installation_and_usage/#sect-Setting_the_Hostname_for_the_System">Setting the Hostname for the
System</a>
in Red Hat OpenStack Platform <em>Director Installation and Usage</em>
for more details)</p>
      </li>
      <li>
        <p>In <strong>API Port</strong>, set the public port used by the OpenStack
Keystone service. By default, OpenStack uses port 5000 for
non-SSL security protocol. For SSL, API port is 13000 by
default.</p>
      </li>
      <li>
        <p>In the <strong>Username</strong> field, enter the name of an OpenStack user
with privileged access (for example, <strong>admin</strong>). Then, provide
its corresponding password in the <strong>Password</strong> and <strong>Confirm
Password</strong> fields.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm ManageIQ can connect to the
OpenStack provider.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Next, configure how ManageIQ should receive events from the
OpenStack provider. Click the <strong>Events</strong> tab in the <strong>Endpoints</strong>
section to start.</p>

    <ul>
      <li>
        <p>To use the Telemetry service of the OpenStack provider, select <strong>Ceilometer</strong>. Before you do so, the provider must first be configured accordingly. See <a href="#configuring-the-undercloud-to-store-events">Configuring the Undercloud to Store Events</a> for details.</p>
      </li>
      <li>
        <p>If you prefer to use the AMQP Messaging bus instead, select
<strong>AMQP</strong>. When you do: In <strong>Hostname (or IPv4 or IPv6 address)</strong>
(of the <strong>Events</strong> tab, under <strong>Endpoints</strong>), enter the public
IP or fully qualified domain name of the AMQP host.</p>

        <ul>
          <li>
            <p>In the <strong>API Port</strong>, set the public port used by AMQP. By
default, OpenStack uses port 5672 for this.</p>
          </li>
          <li>
            <p>In the <strong>Username</strong> field, enter the name of an OpenStack
user with privileged access (for example, <strong>admin</strong>). Then,
provide its corresponding password in the <strong>Password</strong>
field.</p>
          </li>
          <li>
            <p>Click <strong>Validate</strong> to confirm the credentials.</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>You can also configure SSH access to all hosts managed by the OpenStack infrastructure provider. To do so, click on the <strong>RSA key pair</strong> tab in the <strong>Endpoints</strong> section.</p>

    <ol>
      <li>
        <p>From there, enter the <strong>Username</strong> of an account with privileged access.</p>
      </li>
      <li>
        <p>If you selected <strong>SSL</strong> in <strong>Endpoints &gt; Default &gt; Security Protocol</strong> earlier, use the <strong>Browse</strong> button to find and set a private key.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Add</strong> after configuring the infrastructure provider.</p>
  </li>
</ol>

<p><strong>Note:</strong></p>

<p>ManageIQ requires that the <code class="language-plaintext highlighter-rouge">adminURL</code> endpoint for all OpenStack services be on a non-private network. Accordingly, assign the adminURL endpoint an IP address of something other than <code class="language-plaintext highlighter-rouge">192.168.x.x</code>. The <code class="language-plaintext highlighter-rouge">adminURL</code> endpoint must be accessible to the ManageIQ appliance that is responsible for collecting inventory and gathering metrics from the OpenStack environment. Additionally, all the Keystone endpoints must be accessible, otherwise refresh will fail.</p>

<h2 id="configuring-the-undercloud-to-store-events">
<a class="anchor" href="#configuring-the-undercloud-to-store-events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring the Undercloud to Store Events</h2>

<p>To allow ManageIQ to receive events from a Red Hat OpenStack
Platform environment, you must configure the <strong>notification_driver</strong>
option for the Compute service and Orchestration service in that
environment. See <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/director_installation_and_usage/#chap-Installing_the_Undercloud">Installing the
Undercloud</a>
and <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/director_installation_and_usage/#sect-Configuring_the_Director">Configuring the
Director</a>
in Red Hat OpenStack Platform <em>Director Installation and Usage</em> for
related details.</p>

<h1 id="discovering-openstack-infrastructure-providers">
<a class="anchor" href="#discovering-openstack-infrastructure-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Discovering OpenStack Infrastructure Providers</h1>

<p>ManageIQ has the ability to discover OpenStack infrastructure
providers. In this process, ManageIQ scans a network
segment and searches for the Bare Metal (Ironic) service which runs on
port <code class="language-plaintext highlighter-rouge">6385</code> by default. Note that, currently, the discovery does not
work if the Bare Metal service has been moved to a different port.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1942.png" alt="Discover Infrastructure Providers">
(<strong>Discover Infrastructure Providers</strong>).</p>
  </li>
  <li>
    <p>Select <strong>OpenStack Infrastructure</strong> under <strong>Discover</strong>.</p>
  </li>
  <li>
    <p>Provide a <strong>Subnet Range</strong>. Enter the <strong>From Address</strong> and <strong>To
Address</strong> of the address range.</p>
  </li>
  <li>
    <p>Click <strong>Start</strong>.</p>
  </li>
</ol>

<h2 id="vmware-vcenter-providers">
<a class="anchor" href="#vmware-vcenter-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>VMware vCenter Providers</h2>

<p>To use a VMware vCenter provider, add it to the appliance and
authenticate its hosts.</p>

<h1 id="adding-a-vmware-vcenter-provider">
<a class="anchor" href="#adding-a-vmware-vcenter-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a VMware vCenter Provider</h1>

<p>After initial installation and creation of a ManageIQ
environment, add a VMware vCenter provider to the appliance.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1862.png" alt="Add a New Infrastructure Provider"> (<strong>Add
a New Infrastructure Provider</strong>).</p>
  </li>
  <li>
    <p>Enter the <strong>Name</strong> of the provider to add. The <strong>Name</strong> is how the
device is labeled in the console.</p>
  </li>
  <li>
    <p>Select <strong>VMware vCenter</strong> from the <strong>Type</strong> list.</p>
  </li>
  <li>
    <p>Enter the <strong>Host Name or IP address(IPv4 or IPv6)</strong> of the provider.</p>

    <div class="important">

The **Host Name** must use a unique fully qualified domain name.

</div>
  </li>
  <li>
    <p>Select the appropriate <strong>Zone</strong> for the provider. By default, the
zone is set to <strong>default</strong>.</p>
  </li>
  <li>
    <p>Optional: Enter the <strong>Host Default VNC Start Port</strong> and <strong>Host Default VNC End Port</strong>. These properties are used for remote console access with VNC. If VNC is available from the hosts, list the available port range using the start and end port.</p>
  </li>
  <li>
    <p>In the <strong>Credentials</strong> area, under <strong>Default</strong>, provide the login
credentials required for the VMware vCenter administrative user:</p>

    <ul>
      <li>
        <p>Enter the user name in the <strong>Username</strong> field.</p>
      </li>
      <li>
        <p>Enter the password in the <strong>Password</strong> field.</p>
      </li>
      <li>
        <p>Confirm the password in the <strong>Confirm Password</strong> field.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm ManageIQ can connect to the
VMware vCenter.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h1 id="using-a-non-administrator-account-for-vcenter-hosts">
<a class="anchor" href="#using-a-non-administrator-account-for-vcenter-hosts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using a Non-Administrator Account for vCenter Hosts</h1>

<p>After adding a VMware vCenter infrastructure provider, you must
authenticate its hosts to enable full functionality. You can use
administrator credentials, or create another user assigned to a role
created for ManageIQ. See the <a href="https://www.vmware.com/support/pubs/vsphere-esxi-vcenter-server-pubs.html">VMware
documentation</a>
for instructions on how to create a role.</p>

<p>The following privileges should be enabled for the non-administrator
user:</p>

<p>From the Global group, check:</p>

<ul>
  <li>
    <p>Cancel task</p>
  </li>
  <li>
    <p>Diagnostics</p>
  </li>
  <li>
    <p>Log Event</p>
  </li>
  <li>
    <p>Set custom attribute</p>
  </li>
  <li>
    <p>Settings</p>
  </li>
</ul>

<p>Check the entire set of privileges for the following groups:</p>

<ul>
  <li>
    <p>Alarms</p>
  </li>
  <li>
    <p>Datastores</p>
  </li>
  <li>
    <p>dvPort Group</p>
  </li>
  <li>
    <p>Host</p>
  </li>
  <li>
    <p>Network</p>
  </li>
  <li>
    <p>Resource</p>
  </li>
  <li>
    <p>Scheduled Task</p>
  </li>
  <li>
    <p>Tasks</p>
  </li>
  <li>
    <p>Virtual Machine</p>
  </li>
  <li>
    <p>vSphere Distributed Switch</p>
  </li>
</ul>

<p>Additionally, you must assign the new role to the following objects:</p>

<ul>
  <li>
    <p><strong>Datacenter</strong>: At the Datacenter the ManageIQ user/group
must have at least the read-only role at the Datacenter level (Not
Propagated) to be able to see the datacenter. Without this access,
relationships cannot be made. Specifically, the datastores will not
show up.</p>
  </li>
  <li>
    <p><strong>Cluster</strong>: Each Cluster that the ManageIQ needs access to
must have the new role assigned and propagated.</p>
  </li>
  <li>
    <p><strong>Folders</strong>: Each Folder that ManageIQ needs access to must
have the new role assigned and propagated.</p>
  </li>
  <li>
    <p><strong>Datastores</strong>: Each Datastore that ManageIQ needs access to
must have the new role assigned and propagated.</p>
  </li>
  <li>
    <p><strong>Networking</strong>: Each vLAN or Port Group that ManageIQ needs
access to must have the new role assigned and propagated.</p>
  </li>
</ul>

<h1 id="authenticating-vmware-vcenter-hosts">
<a class="anchor" href="#authenticating-vmware-vcenter-hosts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authenticating VMware vCenter Hosts</h1>

<p>The procedure below describes how to authenticate the VMware vCenter
hosts.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click on a provider to display its summary screen.</p>
  </li>
  <li>
    <p>On the summary screen, click <strong>Hosts</strong> in the <strong>Relationships</strong>
information box to display the hosts on that provider.</p>
  </li>
  <li>
    <p>Select the hosts to authenticate. You can select all hosts using the
<strong>Check All</strong> option.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>)</p>
  </li>
  <li>
    <p>Click <img src="../images/1851.png" alt="Edit Selected items"> (<strong>Edit Selected
items</strong>).</p>
  </li>
  <li>
    <p>In the <strong>Credentials</strong> area, under <strong>Default</strong>, provide the VMware
ESXi login credentials:</p>

    <ul>
      <li>
        <p>Enter the user name in the <strong>Username</strong> field.</p>
      </li>
      <li>
        <p>Enter the password in the <strong>Password</strong> field.</p>
      </li>
      <li>
        <p>Confirm the password in the <strong>Confirm Password</strong> field.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm ManageIQ can connect to the
VMware vCenter host.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>If editing multiple hosts, select a host from the <strong>Select Host to
validate against</strong> list; provide the VMware ESXi login credentials
and click <strong>Validate</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h2 id="microsoft-scvmm-providers">
<a class="anchor" href="#microsoft-scvmm-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Microsoft SCVMM Providers</h2>

<p>To use a Microsoft System Center Virtual Machine Manager (SCVMM)
provider, add it to the appliance and set up the SCVMM server for
authentication.</p>

<p><strong>Note:</strong></p>

<p>To use a SCVMM provider, you must have at least one network adapter available for communication between the host and the SCVMM management server. Make sure that <strong>Used by Management</strong> is checked for this network adapter in the SCVMM host properties.</p>

<h1 id="authenticating-to-microsoft-scvmm">
<a class="anchor" href="#authenticating-to-microsoft-scvmm" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authenticating to Microsoft SCVMM</h1>

<p>Before you can add a Microsoft SCVMM provider to your ManageIQ
environment, you must enable WinRM to listen for HTTP traffic on
Microsoft SCVMM servers. You must also set the appropriate execution
policy on the Microsoft SCVMM server to allow PowerShell scripts from
the appliance to run remotely.</p>

<ol>
  <li>
    <p>Log in to the Microsoft SCVMM server.</p>
  </li>
  <li>
    <p>Enable WinRM for configuration.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>winrm quickconfig
</code></pre></div>    </div>
  </li>
  <li>
    <p>Set the following options:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>winrm set winrm/config/client/auth @{Basic="true"}
winrm set winrm/config/service/auth @{Basic="true"}
winrm set winrm/config/service @{AllowUnencrypted="true"}
</code></pre></div>    </div>
  </li>
  <li>
    <p>For Windows 2012 R2 with PowerShell 4.0, use the following syntax to
set these options:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>winrm set winrm/config/client/auth '@{Basic="true"}'
winrm set winrm/config/service/auth '@{Basic="true"}'
winrm set winrm/config/service '@{AllowUnencrypted="true"}'
</code></pre></div>    </div>
  </li>
  <li>
    <p>Enable remote script execution on the SCVMM server using the
Set-ExecutionPolicy cmdlet.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>Set-ExecutionPolicy RemoteSigned
</code></pre></div>    </div>

    <p>For more information on SCVMM remote script execution policies, see
<a href="http://technet.microsoft.com/en-us/library/ee176961.aspx">Using the Set-ExecutionPolicy
Cmdlet</a>.</p>
  </li>
</ol>

<p>If PowerShell returns an error, search for <code class="language-plaintext highlighter-rouge">log_dos_error_results</code> in
the <code class="language-plaintext highlighter-rouge">evm.log</code> and <code class="language-plaintext highlighter-rouge">scvmm.log</code> files for information.</p>

<h1 id="adding-a-microsoft-scvmm-provider">
<a class="anchor" href="#adding-a-microsoft-scvmm-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a Microsoft SCVMM Provider</h1>

<p>After initial installation and creation of a ManageIQ
environment, add a Microsoft System Center Virtual Machine Manager
(SCVMM) provider to the appliance.</p>

<p><strong>Note:</strong></p>

<p>To authenticate the provider using a self-signed Certificate Authority (CA), configure the ManageIQ appliance to trust the
certificate using the steps in <a href="#app-self_signed_CA">Using a Self-Signed CA Certificate</a> before adding
the provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then click
<img src="../images/1862.png" alt="1862"> (<strong>Add a New Infrastructure Provider</strong>).</p>
  </li>
  <li>
    <p>Enter the <strong>Name</strong> of the provider to add. The <strong>Name</strong> is how the
device is labeled in the console.</p>
  </li>
  <li>
    <p>Select <strong>Microsoft System Center VMM</strong> from the <strong>Type</strong> list.</p>
  </li>
  <li>
    <p>Enter the <strong>Host Name or IP address(IPv4 or IPv6)</strong> of the provider.</p>

    <div class="important">

The **Host Name** must use a unique fully qualified domain name.

</div>
  </li>
  <li>
    <p>Select <strong>Kerberos</strong> or <strong>Basic (SSL)</strong> from the <strong>Security
Protocol</strong> list.</p>

    <ol>
      <li>
        <p>For <strong>Kerberos</strong>:</p>

        <ol>
          <li>
            <p>Enter the user name and realm in the <strong>Username</strong> field.</p>
          </li>
          <li>
            <p>Enter the password in the <strong>Password</strong> field.</p>
          </li>
          <li>
            <p>Enter the password again in the <strong>Confirm Password</strong> field.</p>
          </li>
        </ol>
      </li>
      <li>
        <p>For <strong>Basic (SSL)</strong>:</p>

        <ol>
          <li>
            <p>Enter the user name in the <strong>Username</strong> field.</p>
          </li>
          <li>
            <p>Enter the password in the <strong>Password</strong> field.</p>
          </li>
          <li>
            <p>Enter the password again in the <strong>Confirm Password</strong> field.</p>
          </li>
        </ol>
      </li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Validate</strong> to confirm that ManageIQ can connect to
the Microsoft System Center Virtual Machine Manager.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h1 id="refreshing-providers">
<a class="anchor" href="#refreshing-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refreshing Providers</h1>

<p>Refresh a provider to find other resources related to it. Use
<strong>Refresh</strong> after initial discovery to get the latest data about the
provider and the virtual machines it can access. Ensure the provider has
credentials to do this. If the providers were added using <strong>Discovery</strong>,
add credentials using <img src="../images/1851.png" alt="Edit Selected Infrastructure
Provider"> (<strong>Edit Selected Infrastructure Provider</strong>).</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Select the providers to refresh.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (Configuration), and then
<img src="../images/2003.png" alt="Refresh Relationships and Power States">
(<strong>Refresh Relationships and Power States</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<h1 id="tagging-multiple-providers">
<a class="anchor" href="#tagging-multiple-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagging Multiple Providers</h1>

<p>Apply tags to all providers to categorize them together at the same
time.</p>

<ol>
  <li>
    <p>Navigate to menu:Infrastructure[Providers].</p>
  </li>
  <li>
    <p>Check the providers to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/2158.png" alt="Edit
Tags"> (<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p>In the <strong>Tag Assignment</strong> area, select a customer tag to assign from
the first list, then select a value to assign from the second list.</p>

    <p><img src="../images/2194.png" alt="2194"></p>
  </li>
  <li>
    <p>Select more tags as required; click (<strong>Save</strong>).</p>
  </li>
</ol>

<h1 id="viewing-a-provider">
<a class="anchor" href="#viewing-a-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing a Provider</h1>

<p>From a list of providers, you can review a specific provider by clicking
on it. This displays various options to access provider information.</p>

<p>There are two methods of viewing an infrastructure provider’s details:
the summary screen (default) and the dashboard screen. Use the summary
<img src="../images/summary.png" alt="summary"> and dashboard
<img src="../images/dashboard.png" alt="dashboard"> buttons to toggle between views.</p>

<p>Both the summary and dashboard screens contain a taskbar with
<strong>Reload</strong>, <strong>Configuration</strong>, <strong>Policy</strong>, <strong>Monitoring</strong>, and
<strong>Authentication</strong> buttons to manage the selected provider.</p>

<p><strong>Provider Summary Screen.</strong></p>

<p><img src="../images/providers-summary-screen.png" alt="providers summary screen"></p>

<p>The provider summary screen displays information about the provider in
table format.</p>

<ul>
  <li>
    <p>Provider accordion: Displays details about the provider’s
<strong>Properties</strong> and <strong>Relationships</strong> on the sidebar. Click to expand
these lists.</p>
  </li>
  <li>
    <p>Provider summary: Displays a provider’s <strong>Properties</strong>, <strong>Status</strong>,
<strong>Relationships</strong>, and <strong>Smart Management</strong>. Click on an item in the
<strong>Relationships</strong> table to see more information about that entity.</p>
  </li>
</ul>

<p><strong>Provider Dashboard Screen.</strong></p>

<p><img src="../images/providers-summary-dashboard.png" alt="providers summary dashboard"></p>

<p>From the dashboard, you can view:</p>

<ul>
  <li>
    <p>Number of clusters, hosts, virtual machines, templates, datastores,
resource pools, and other entities on the provider. Click on an
entity to see more information about that item.</p>
  </li>
  <li>
    <p>Aggregate utilization for CPU, memory, and storage</p>
  </li>
  <li>
    <p>Network I/O statistics</p>
  </li>
  <li>
    <p>Trends for hosts and virtual machines discovered</p>
  </li>
</ul>

<p>To view the dashboard:</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click the infrastructure provider to view.</p>
  </li>
  <li>
    <p>To access the dashboard view, click
<img src="../images/dashboard.png" alt="dashboard"> (<strong>Dashboard view</strong>).</p>
  </li>
</ol>

<p>To return to the summary view, click <img src="../images/summary.png" alt="summary">
(<strong>Summary view</strong>).</p>

<h1 id="removing-a-provider">
<a class="anchor" href="#removing-a-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing a Provider</h1>

<p>If a provider has been decommissioned or requires some troubleshooting,
it might require deletion from the VMDB.</p>

<p>Deleting a provider removes the account information from ManageIQ
console. You will no longer be able to view any associated history
including chargeback reports generated for the deleted provider.
Additionally, if ManageIQ is the database of record, deleting
providers would become a major problem for the other systems relying on
it for accurate and consistent billing information. Review all the
dependencies carefully before deleting a provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Select the check box for the provider to delete.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/2098.png" alt="Remove Infrastructure Providers from the VMDB">
(<strong>Remove Infrastructure Providers from the VMDB</strong>).</p>
  </li>
  <li>
    <p>Click (<strong>OK</strong>).</p>
  </li>
</ol>

<h1 id="viewing-the-provider-timeline">
<a class="anchor" href="#viewing-the-provider-timeline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing the Provider Timeline</h1>

<p>View the timeline of events for the virtual machines registered to a
provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click a provider.</p>
  </li>
  <li>
    <p>Click <img src="../images/1994.png" alt="Monitoring"> (<strong>Monitoring</strong>), and then
<img src="../images/1995.png" alt="Timelines"> (<strong>Timelines</strong>)from the taskbar, or
from the provider accordion, click menu:Properties[Timeline].</p>
  </li>
  <li>
    <p>From <strong>Options</strong>, customize the period of time to display and the
types of events to see.</p>

    <p><img src="../images/provider-timeline.png" alt="provider timeline"></p>

    <ul>
      <li>
        <p>Use <strong>Show</strong> to select regular Management Events or Policy
Events.</p>
      </li>
      <li>
        <p>Use the <strong>Interval</strong> dropdown to select hourly or daily data
points.</p>
      </li>
      <li>
        <p>Use <strong>Date</strong> to type the date for the timeline to display.</p>
      </li>
      <li>
        <p>If you select to view a daily timeline, use <strong>Show</strong> to set how
many days back to go. The maximum history is 31 days.</p>
      </li>
      <li>
        <p>The three <strong>Event Groups</strong> lists allow you to select different
groups of events to display. Each has its own color.</p>
      </li>
      <li>
        <p>From the <strong>Level</strong> list, select a <strong>Summary</strong> event, or a
<strong>Detail</strong> list of events. For example, the detail level of a
<strong>Power On</strong> event might include the power on request, the
starting event, and the actual <strong>Power On</strong> event. If you select
<strong>Summary</strong>, only the Power On event displays in the timeline.</p>
      </li>
    </ul>
  </li>
</ol>

<h1 id="viewing-hosts-and-clusters">
<a class="anchor" href="#viewing-hosts-and-clusters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing Hosts and Clusters</h1>

<p>Access a tree view of the hosts and clusters for a provider from the
<strong>Provider Summary</strong>.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click the provider to view the hosts and clusters.</p>
  </li>
  <li>
    <p>Click on the <strong>Relationships</strong> accordion, then click <strong>Hosts &amp;
Clusters</strong>.</p>
  </li>
</ol>

<p><img src="../images/hostsandclusters.png" alt="hostsandclusters"></p>

<h1 id="viewing-virtual-machines-and-templates">
<a class="anchor" href="#viewing-virtual-machines-and-templates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing Virtual Machines and Templates</h1>

<p>Access a tree view of the virtual machines and templates for a provider
from the <strong>Provider Summary</strong>.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Infrastructure &gt; Providers].</p>
  </li>
  <li>
    <p>Click the provider to view the virtual machines and templates.</p>
  </li>
  <li>
    <p>From accordion menu, click <strong>Relationships</strong>, then click <strong>VMs &amp;
Templates</strong>.</p>
  </li>
</ol>

<h1 id="configuration-management-providers">
<a class="anchor" href="#configuration-management-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration Management Providers</h1>

<p>In ManageIQ, a configuration management provider is a
systems management product that you can add to a ManageIQ
appliance to manage the lifecycle of your resources. Configuration
management providers are useful for uniformly applying changes and
updates across providers, and for recording and reporting status and
change activity. They can also help eliminate the confusion and error
brought about by the existence of different providers.</p>

<p>This chapter describes the different types of configuration management
providers available to ManageIQ, and how to manage them.
Configuration management providers must be added individually to
ManageIQ.</p>

<h2 id="red-hat-satellite-6">
<a class="anchor" href="#red-hat-satellite-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Red Hat Satellite 6</h2>

<p>Satellite 6 is a subscription and system management tool that provides a
way to provision hosts (both virtual and bare metal) and configure them
using a set of Puppet modules. ManageIQ provides functionality to
integrate with a Red Hat Satellite 6 server and take advantage of its
features. This includes:</p>

<ul>
  <li>
    <p>Monitoring the inventory of your Red Hat Satellite 6 server,
including independent hosts and hosts provisioned using hostgroups.</p>
  </li>
  <li>
    <p>Reprovisioning existing bare metal system hosts to new host groups.</p>
  </li>
  <li>
    <p>Applying ManageIQ policy tags to hosts.</p>
  </li>
</ul>

<div class="important">

ManageIQ only reprovisions existing systems in a Red Hat
Satellite 6 environment. Provisioning systems from Red Hat Satellite 6’s
bare metal discovery service is planned for a future release.

</div>

<h1 id="defining-the-workflow">
<a class="anchor" href="#defining-the-workflow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Defining the Workflow</h1>

<p>This section uses the following workflow:</p>

<ol>
  <li>
    <p>Add Red Hat Satellite 6 server details to ManageIQ.</p>
  </li>
  <li>
    <p>Refresh the state of your Red Hat Satellite 6 provider in
ManageIQ.</p>
  </li>
  <li>
    <p>Select an existing bare metal host from Red Hat Satellite 6 for
reprovisioning.</p>
  </li>
  <li>
    <p>Apply policy tags to Red Hat Satellite 6 hosts.</p>
  </li>
</ol>

<h1 id="defining-the-hostgroup-hierarchy">
<a class="anchor" href="#defining-the-hostgroup-hierarchy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Defining the Hostgroup Hierarchy</h1>

<p>ManageIQ displays the Red Hat Satellite 6 infrastructure in a
host group and host relationship. A host group defines a set of default
values that hosts inherit when placed in that group. Hosts can belong to
only one host group, but host groups can be nested in hierarchies. You
can create a <strong>“base”</strong> or <strong>“parent”</strong> host group that represents all
hosts in your organization, and then create nested or <strong>“child”</strong> host
groups under that parent to provide specific settings.</p>

<h1 id="adding-a-satellite-6-provider">
<a class="anchor" href="#adding-a-satellite-6-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a Satellite 6 Provider</h1>

<p>To start provisioning bare metal machines, you need at least one Red Hat
Satelllite 6 provider added to ManageIQ.</p>

<ol>
  <li>
    <p>Navigate to menu:Configuration[Management].</p>
  </li>
  <li>
    <p>Select menu:Configuration[Add a new Provider].</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>Enter a <strong>URL</strong> for the provider. This is the root URL for the
Satellite 6 server and can be either an IP address or a hostname.
For example, <code class="language-plaintext highlighter-rouge">http://satellite6.example.com</code>.</p>
  </li>
  <li>
    <p>Select <strong>Verify Peer Certificate</strong> to use encrypted communication
with the provider. This requires the <strong>SSL certificates</strong> from your
Red Hat Satellite 6 provider.</p>
  </li>
  <li>
    <p>Enter a <strong>Username</strong> for a user on the provider. Ideally, this would
be a user in Satellite 6 with administrative access.</p>
  </li>
  <li>
    <p>Enter a <strong>Password</strong>, and then enter it again in <strong>Confirm
Password</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Validate</strong> to test your connection with the Red Hat
Satellite 6 server.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong> to confirm your settings and save the provider.</p>
  </li>
</ol>

<p>ManageIQ saves the Satellite 6 provider in its database and
triggers a refresh of resources detected in the provider.</p>

<h1 id="triggering-a-refresh-of-a-satellite-6-provider">
<a class="anchor" href="#triggering-a-refresh-of-a-satellite-6-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Triggering a Refresh of a Satellite 6 Provider</h1>

<p>Your Satellite 6 provider can still create new hosts independently of
ManageIQ. Your ManageIQ appliance detects these changes
after an automatic refresh period. However, you can trigger a manual
refresh to avoid waiting for the automatic refresh.</p>

<ol>
  <li>
    <p>Navigate to menu:Configuration[Management].</p>
  </li>
  <li>
    <p>Select your Red Hat Satellite 6 provider using the checkbox, and
click menu:Configuration[Refresh Relationships and Power States].
This triggers the refresh.</p>
  </li>
  <li>
    <p>When the refresh is complete, select the Red Hat Satellite 6
provider to check the updated list of hosts groups in the provider.</p>
  </li>
</ol>

<h1 id="displaying-red-hat-satellite-6-contents">
<a class="anchor" href="#displaying-red-hat-satellite-6-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Displaying Red Hat Satellite 6 Contents</h1>

<p>ManageIQ provides two methods for viewing the contents of a Red
Hat Satellite 6 provider:</p>

<ul>
  <li>
    <p><strong>Providers</strong> - This presents the Red Hat Satellite 6 contents as a
hierarchy of host groups belonging to a provider, and then
individual hosts belonging to each provider.</p>
  </li>
  <li>
    <p><strong>Configured Systems</strong> - This presents a list of all hosts on your
Red Hat Satellite 6 server. This also provides a method to apply
predefined filters to organized specific machines.</p>
  </li>
</ul>

<p>Change between these two views using the accordion menu on the left of
the user interface.</p>

<h1 id="reprovisioning-a-bare-metal-host">
<a class="anchor" href="#reprovisioning-a-bare-metal-host" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reprovisioning a Bare Metal Host</h1>

<p>This procedure provides an example of reprovisioning an existing bare
metal system into a new hostgroup. For this example, your Red Hat
Satellite 6 environment requires the following:</p>

<ul>
  <li>
    <p>An existing bare metal system stored as a host object in your Red
Hat Satellite 6 server. This system can be one of the following:</p>

    <ul>
      <li>
        <p>A standalone system previously provisioned without a host group.</p>
      </li>
      <li>
        <p>A system previously provisioned using a host group.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>A target host group. This host group contains the system
configuration to apply to the host when reprovisioning it. This
includes:</p>

    <ul>
      <li>
        <p>A new operating system installation, including a new partition
table.</p>
      </li>
      <li>
        <p>A new networking configuration that the Red Hat Satellite 6
server defines and manages.</p>
      </li>
      <li>
        <p>Registration to any Red Hat subscriptions and repositories
assigned to the host group.</p>
      </li>
      <li>
        <p>Application of any Puppet modules assigned to the host group.</p>
      </li>
    </ul>
  </li>
</ul>

<!-- end list -->

<ol>
  <li>
    <p>Navigate to menu:Configuration[Management].</p>
  </li>
  <li>
    <p>Select <strong>Configured Systems</strong> from the accordion menu on the left.
This displays the system list.</p>
  </li>
  <li>
    <p>Select one or more hosts to reprovision.</p>
  </li>
  <li>
    <p>Select menu:Lifecycle[Provision Configured Systems].</p>
  </li>
  <li>
    <p>Under the <strong>Request</strong> tab, enter the following details:</p>

    <ol>
      <li>
        <p><strong>E-Mail address</strong></p>
      </li>
      <li>
        <p><strong>First Name</strong></p>
      </li>
      <li>
        <p><strong>Last Name</strong></p>
      </li>
      <li>
        <p>This form also contains optional fields for users to enter a
plain text <strong>Note</strong> to inform ManageIQ administrators of
any special details, and a field to provide a manager’s name in
case administrators require approval from a user’s manager.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Select the <strong>Purpose</strong> tab and select any ManageIQ policy
tags that apply to the system.</p>
  </li>
  <li>
    <p>Select the <strong>Catalog</strong> tab. This screen displays the list of chosen
machines to reprovision and their current details. Select a <strong>target
host group</strong> from the <strong>Configuration Profile</strong> list.
ManageIQ communicates with Red Hat Satellite to apply the
configuration from this host group to the selected host and
reprovision the system.</p>
  </li>
  <li>
    <p>Select the <strong>Customize</strong> tab. This screen displays some customizable
fields for the selected system. You can change the <strong>Root Password</strong>
or change the <strong>Hostname</strong> and <strong>IP Address</strong>. Note that these
fields are optional, because the host group in Red Hat Satellite 6
contains this information. The fields here will override the
settings from the host group.</p>

    <div class="important">

Provisioning bare metal systems still requires access to the network
that Red Hat Satellite 6 manages. This is because Red Hat Satellite
controls PXE booting, kickstarts, and Puppet configuration for bare
metal systems. Ensure the IP address you enter in ManageIQ
can access a DHCP service that Red Hat Satellite 6 provides either
through the main server or through a Red Hat Satellite 6 Capsule
server.

</div>
  </li>
  <li>
    <p>Select the <strong>Customize</strong> tab. This screen allows you to either
launch the provisioning process immediately on approval or using a
schedule. Click <strong>Schedule</strong> to show the date and time fields used
to schedule the provisioning.</p>
  </li>
  <li>
    <p>Click <strong>Submit</strong>.</p>
  </li>
</ol>

<p>Depending on the request settings on your ManageIQ appliance,
this provisioning request might require approval from an administrator.
If not, the provisioning request launches depending on your choice for
the schedule.</p>

<p><strong>Note:</strong></p>

<p>Previously provisioned hosts might require manual selection of PXE boot
from the boot menu, otherwise they might boot to hard disk and not
reprovision.</p>

<h1 id="tagging-a-bare-metal-host">
<a class="anchor" href="#tagging-a-bare-metal-host" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagging a Bare Metal Host</h1>

<p>ManageIQ can also control policy settings of bare metal systems
from Red Hat Satellite 6 through tagging. Tagging attaches levels of
metadata to help define the policy rules required for a set of systems.</p>

<ol>
  <li>
    <p>Navigate to menu:Configuration[Management].</p>
  </li>
  <li>
    <p>Select <strong>Configured Systems</strong> from the accordion menu on the left.
This displays the system list.</p>
  </li>
  <li>
    <p>Select one or more hosts to tag.</p>
  </li>
  <li>
    <p>Select menu:Policy[Edit Tags].</p>
  </li>
  <li>
    <p>Under <strong>Tag Assignment</strong>, select a tag from <strong>Select a customer tag
to assign</strong> and then choose a value from <strong>Select a value to
assign</strong>. For example, you can tag this system as located in Chicago
by selecting <code class="language-plaintext highlighter-rouge">Location</code> as the tag and <code class="language-plaintext highlighter-rouge">Chicago</code> as the value. Once
selected, the user interface automatically adds this tag and value
to the table below.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<p>The bare metal system is now configured with a set of policy tags.</p>

<h1 id="automation-management-providers">
<a class="anchor" href="#automation-management-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automation Management Providers</h1>

<p>In ManageIQ, an automation management provider is a management
tool that integrates with ManageIQ to simplify automation
operations for your resources. This chapter describes the automation
management providers that you can use with ManageIQ, and how to
work with them.</p>

<p>ManageIQ provides automation management features through the
following:</p>

<p><strong>Automate</strong> enables real-time, bi-directional process integration. This
provides you with a method to implement adaptive automation for
management events and administrative or operational activities.</p>

<p><strong>Ansible</strong> integration delivers out-of-the-box support for backing
service, alert and policy actions using Ansible playbooks. Sync your
existing playbook repositories with ManageIQ, add
credentials to access providers, and create service catalog items for
actions ranging from creating and retiring VMs, updating security
software, or adding additional disks when space runs low.</p>

<p><strong>Ansible Tower</strong> is a management tool integrated with
ManageIQ, designed to help automate infrastructure
operations utilizing existing Ansible Tower providers in your inventory.
ManageIQ allows you to execute Ansible Tower jobs using
service catalogs and Automate. Using Ansible Tower, you can schedule
Ansible playbook runs and monitor current and historical results,
allowing for troubleshooting or identification of issues before they
occur.</p>

<h2 id="ansible">
<a class="anchor" href="#ansible" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ansible</h2>

<p>Ansible integrates with ManageIQ to provide automation solutions,
using playbooks, for Service, Policy and Alert actions. Ansible
playbooks consist of series of <em>plays</em> or tasks that define automation
across a set of hosts, known as the inventory.</p>

<p>Ranging from simple to complex tasks, Ansible playbooks can support
cloud management:</p>

<ul>
  <li>
    <p><strong>Services</strong> - allow a playbook to back a ManageIQ
service catalog item.</p>
  </li>
  <li>
    <p><strong>Control Actions</strong> - ManageIQ policies can execute
playbooks as actions based on events from providers.</p>
  </li>
  <li>
    <p><strong>Control Alerts</strong> - set a playbook to launch prompted by a
ManageIQ alert.</p>
  </li>
</ul>

<p>Ansible is built into ManageIQ so there is nothing to
install. The basic workflow when using Ansible in ManageIQ is as
follows:</p>

<ol>
  <li>
    <p>Enable the <strong>Embedded Ansible</strong> server role.</p>
  </li>
  <li>
    <p>Add a source control repository that contains your playbooks.</p>
  </li>
  <li>
    <p>Establish credentials with your inventory.</p>
  </li>
  <li>
    <p>Back your services, alerts and policies using available playbooks.</p>
  </li>
</ol>

<h3 id="enabling-the-embedded-ansible-server-role">
<a class="anchor" href="#enabling-the-embedded-ansible-server-role" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling the Embedded Ansible Server Role</h3>

<p>In ManageIQ, the <strong>Embedded Ansible</strong> role is disabled by
default. Enable this server role to utilize Ansible Automation Inside.</p>

<p><strong>Note:</strong></p>

<p>Configure your ManageIQ appliance network identity (hostname/IP address) before enabling the Embedded Ansible server role.
Restart the <code class="language-plaintext highlighter-rouge">evmserverd</code> service on the appliance with the enabled Embedded Ansible server role after making any changes to the hostname or IP address.</p>

<ol>
  <li>
    <p>Navigate to the settings menu, then <strong>Configuration</strong> →
<strong>Settings</strong>.</p>
  </li>
  <li>
    <p>Select the desired server under <strong>Zones</strong>.</p>
  </li>
  <li>
    <p>Set the <strong>Server Role</strong> for <strong>Embedded Ansible</strong> to <strong>On</strong>.</p>
  </li>
</ol>

<h3 id="verifying-the-embedded-ansible-worker-state">
<a class="anchor" href="#verifying-the-embedded-ansible-worker-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>Verifying the Embedded Ansible Worker State</h3>

<p>Verify that the Embedded Ansible worker has started to utilize its
features.</p>

<ol>
  <li>
    <p>Navigate to the settings menu, then <strong>Configuration</strong> →
<strong>Diagnostics</strong> and click on the desired server.</p>
  </li>
  <li>
    <p>Click on the <strong>Workers</strong> tab.</p>
  </li>
</ol>

<p>A table of all workers and current status will appear from which you can
confirm the state of your embedded Ansible worker.</p>

<h3 id="adding-a-playbook-repository">
<a class="anchor" href="#adding-a-playbook-repository" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a Playbook Repository</h3>

<p>Add a repository so that ManageIQ can discover and make available
your playbooks.</p>

<ol>
  <li>
    <p>Navigate to menu:Automation[Ansible &gt; Repositories].</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
  <li>
    <p>Provide a Repository Name in the <strong>Name</strong> field.</p>
  </li>
  <li>
    <p>Add a description for the repository in the <strong>Description</strong> field.</p>
  </li>
  <li>
    <p>Select an <strong>SCM Type</strong> from the drop-down menu.</p>
  </li>
  <li>
    <p>Add a <strong>URL</strong> or IP Address for the repository.</p>
  </li>
  <li>
    <p>Select the appropriate <strong>SCM Credentials</strong> from the drop-down menu.</p>
  </li>
  <li>
    <p>Provide a branch name in the <strong>SCM Branch</strong> field.</p>
  </li>
  <li>
    <p>Check the appropriate box for any <strong>SCM Update Options</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<p>Once you have synced a repository, its playbooks will become available
to ManageIQ.</p>

<h3 id="refreshing-repositories">
<a class="anchor" href="#refreshing-repositories" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refreshing Repositories</h3>

<p>ManageIQ allows you to refresh a targeted playbook repository or
all repositories in your inventory to ensure your playbooks are current.</p>

<p>Refresh a targeted repository:</p>

<ol>
  <li>
    <p>Navigate to menu:Automation[Ansible &gt; Repositories].</p>
  </li>
  <li>
    <p>Click on a repository.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/2003.png" alt="Refresh this Repository"> (<strong>Refresh this
Repository</strong>).</p>
  </li>
</ol>

<p>Alternately, you can refresh some or all repositories from the list
view:</p>

<ol>
  <li>
    <p>Navigate to menu:Automation[Ansible &gt; Repositories].</p>
  </li>
  <li>
    <p>Check those repositories to refresh. Click <strong>Check All</strong> to select
all repositories.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/2003.png" alt="Refresh Selected Ansible Repositories">
(<strong>Refresh Selected Ansible Repositories</strong>).</p>
  </li>
</ol>

<h1 id="credentials">
<a class="anchor" href="#credentials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credentials</h1>

<p>Credentials are utilized by ManageIQ for authentication when
running Ansible playbooks against machines, synchronizing with inventory
sources, and importing project content from a version control system.</p>

<h2 id="adding-credentials">
<a class="anchor" href="#adding-credentials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Credentials</h2>

<p>ManageIQ can store credentials used by playbooks. Credentials
saved in ManageIQ are matched and executed with a playbook
when run.</p>

<ol>
  <li>
    <p>Navigate to menu:Automation[Ansible &gt; Credentials].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/1862.png" alt="Add a New Credential"> (<strong>Add a New
Credential</strong>).</p>
  </li>
  <li>
    <p>Provide a <strong>Name</strong> for the credential.</p>
  </li>
  <li>
    <p>Select the <strong>Credential Type</strong>. Additional fields will appear
depending on the type chosen.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h2 id="credential-types">
<a class="anchor" href="#credential-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credential Types</h2>

<p>Each credential type used by ManageIQ is detailed in the
following sections.</p>

<h3 id="machine">
<a class="anchor" href="#machine" aria-hidden="true"><span class="octicon octicon-link"></span></a>Machine</h3>

<p>Machine credentials enable ManageIQ to invoke Ansible on
hosts under your management. Just like using Ansible on the command
line, you can specify the SSH username, optionally provide a password,
an SSH key, or a key password. They define SSH and user-level privilege
escalation access for playbooks, and are used when running playbooks on
a remote host.</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to be used for SSH authentication.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The actual password to be used for SSH authentication.</p>
  </li>
  <li>
    <p><strong>SSH Private Key</strong>: Copy or drag-and-drop the SSH private key for
the machine credential.</p>
  </li>
  <li>
    <p><strong>Private Key Passphrase</strong>: If the SSH Private Key used is protected
by a password, you can configure a Key Password for the private key.</p>
  </li>
  <li>
    <p><strong>Privilege Escalation</strong>: Specifies the type of escalation privilege
to assign to specific users. Options include <strong>sudo</strong>, <strong>su</strong>,
<strong>pbrun</strong>, <strong>pfexec</strong>.</p>
  </li>
  <li>
    <p><strong>Privilege Escalation Username</strong>: Enter the username to use with
escalation privileges on the remote system.</p>
  </li>
  <li>
    <p><strong>Privilege Escalation Password</strong>: Enter the actual password to be
used to authenticate the user via the selected privilege escalation
type on the remote system.</p>
  </li>
  <li>
    <p><strong>Vault Password</strong>: Ansible Vault credentials have only the <strong>Vault
Password</strong> attribute that may be configured.</p>
  </li>
</ul>

<p><strong>Note:</strong></p>

<p>For more information on Ansible Vault, see <a href="http://docs.ansible.com/ansible/latest/playbooks_vault.html">Using Vault in playbooks</a>.</p>

<h3 id="network">
<a class="anchor" href="#network" aria-hidden="true"><span class="octicon octicon-link"></span></a>Network</h3>

<p>Network credentials are used by Ansible networking modules to connect to
and manage networking devices.</p>

<p>Network credentials have several attributes that may be configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use in conjunction with the network
device.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The password to use in conjunction with the network
device.</p>
  </li>
  <li>
    <p><strong>Authorize</strong>: Select this from the Options field to add an
Authorize password which signs the RSA key with a password.</p>
  </li>
  <li>
    <p><strong>Authorize password</strong>: If <strong>Authorize</strong> is checked, enter a
password in the <strong>Authorize Password</strong> field.</p>
  </li>
  <li>
    <p><strong>SSH Key</strong>: Copy or drag-and-drop the actual SSH Private Key to be
used to authenticate the user to the network via SSH.</p>
  </li>
  <li>
    <p><strong>Private key passphrase</strong>: The actual passphrase for the private
key to be used to authenticate the user to the network via SSH.</p>
  </li>
</ul>

<h3 id="scm">
<a class="anchor" href="#scm" aria-hidden="true"><span class="octicon octicon-link"></span></a>SCM</h3>

<p>SCM (source control) credentials are used with Projects to clone and
update local source code repositories from a remote revision control
system such as Git, Subversion, or Mercurial.</p>

<p>Source Control credentials have several attributes that may be
configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use in conjunction with the source
control system.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The password to use in conjunction with the source
control system.</p>
  </li>
  <li>
    <p><strong>Private key passphrase</strong>: If the SSH private key used is protected
by a passphrase, you may configure a key passphrase for the private
key.</p>
  </li>
  <li>
    <p><strong>Private Key</strong>: Copy or drag-and-drop the actual SSH Private Key to
be used to authenticate the user to the source control system via
SSH.</p>
  </li>
</ul>

<h3 id="amazon">
<a class="anchor" href="#amazon" aria-hidden="true"><span class="octicon octicon-link"></span></a>Amazon</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Amazon Web Services.</p>

<ul>
  <li>
    <p><strong>Access Key</strong>: User credentials that allow for programmatic calls
to Amazon Web Services.</p>
  </li>
  <li>
    <p><strong>Secret Key</strong>: The secret key that corresponds to the user access
key.</p>
  </li>
  <li>
    <p><strong>STS Token</strong>: Token generated by Amazon Web Services Security Token
Service.</p>
  </li>
</ul>

<h3 id="azure-classic-deprecated">
<a class="anchor" href="#azure-classic-deprecated" aria-hidden="true"><span class="octicon octicon-link"></span></a>Azure Classic (deprecated)</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Microsoft Windows Azure Classic.</p>

<p>Microsoft Azure credentials have several attributes to configure:</p>

<ul>
  <li>
    <p><strong>Subscription ID</strong>: The Subscription UUID for the Microsoft Azure
Classic account.</p>
  </li>
  <li>
    <p><strong>Management Certificate</strong>: The PEM file that corresponds to the
certificate you uploaded in the Microsoft Azure Classic console.</p>
  </li>
</ul>

<h3 id="azure">
<a class="anchor" href="#azure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Azure</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Microsoft Azure.</p>

<p>Microsoft Azure credentials have several attributes to configure:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use to connect to the Microsoft Azure
account.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The password to use to connect to the Microsoft Azure
account.</p>
  </li>
  <li>
    <p><strong>Subscription ID</strong>: The Subscription UUID for the Microsoft Azure
account.</p>
  </li>
  <li>
    <p><strong>Tenant ID</strong>: The Tenant ID for the Microsoft Azure account.</p>
  </li>
  <li>
    <p><strong>Client Secret</strong>: The Client Secret for the Microsoft Azure
account.</p>
  </li>
  <li>
    <p><strong>Client ID</strong>: The Client ID for the Microsoft Azure account.</p>
  </li>
</ul>

<h3 id="openstack">
<a class="anchor" href="#openstack" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenStack</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Red Hat OpenStack Platform.</p>

<p>OpenStack credentials have several attributes that may be configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use to connect to OpenStack.</p>
  </li>
  <li>
    <p><strong>Password (API Key)</strong>: The password or API key to use to connect to
OpenStack.</p>
  </li>
  <li>
    <p><strong>Host (Authentication URL)</strong>: The host to be used for
authentication.</p>
  </li>
  <li>
    <p><strong>Project (Tenant Name)</strong>: The Tenant name or Tenant ID used for
OpenStack. This value is usually the same as the username.</p>
  </li>
  <li>
    <p><strong>Domain name</strong>: The FQDN to be used to connect to OpenStack.</p>
  </li>
</ul>

<h3 id="rackspace">
<a class="anchor" href="#rackspace" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rackspace</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Rackspace.</p>

<p>Rackspace credentials have the following attributes that may be
configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use to connect to vCenter.</p>
  </li>
  <li>
    <p><strong>API Key</strong>: The public key related to the administrator ID.</p>
  </li>
</ul>

<h3 id="red-hat-virtualization">
<a class="anchor" href="#red-hat-virtualization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Red Hat Virtualization</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Red Hat Virtualization.</p>

<p>Red Hat Virtualization credentials have several attributes that may be
configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use to connect to Red Hat
Virtualization.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The password to use to connect to Red Hat
Virtualization.</p>
  </li>
  <li>
    <p><strong>Host (Authentication URL)</strong>: The host to be used for
authentication.</p>

    <div class="important">

  - Enter in **Host** the Red Hat Virtualization provider URL,
    followed by the path `/ovirt_engine/api`. Example:
    `https://your.rhv.com/ovirt_engine/api`

  - See [Ansible Roles](https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/administration_guide/chap-automating_rhv_configuration_using_ansible#Ansible_Roles)
    for more information on Ansible Roles available for Red Hat
    Virtualization.

</div>
  </li>
</ul>

<h3 id="satellite-6">
<a class="anchor" href="#satellite-6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Satellite 6</h3>

<p>Selecting this credential type enables synchronization of cloud
inventory with Red Hat Satellite 6.</p>

<p>Satellite credentials have several attributes that may be configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use to connect to Satellite 6.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The password to use to connect to Satellite 6.</p>
  </li>
  <li>
    <p><strong>Satellite 6 Host</strong>: The Satellite 6 URL or IP address to connect
to.</p>
  </li>
</ul>

<h3 id="vmware">
<a class="anchor" href="#vmware" aria-hidden="true"><span class="octicon octicon-link"></span></a>VMware</h3>

<p>Selecting this credential type enables synchronization of inventory with
VMware vCenter.</p>

<p><strong>Important:</strong></p>

<p>If both ManageIQ and a VMware provider are located in the same IPv6-only network, use a DNS-resolvable hostname for the VMware provider in the <strong>vCenter Host</strong> field when adding credentials.</p>

<p>VMware credentials have several attributes that may be configured:</p>

<ul>
  <li>
    <p><strong>Username</strong>: The username to use to connect to vCenter.</p>
  </li>
  <li>
    <p><strong>Password</strong>: The password to use to connect to vCenter.</p>
  </li>
  <li>
    <p><strong>vCenter Host</strong>: The vCenter hostname or IP address to connect to.</p>
  </li>
</ul>

<p><strong>Note:</strong></p>

<p>If the VMware guest tools are not running on the instance, VMware inventory sync may not return an IP address for that instance.</p>

<h1 id="tagging-ansible-playbooks-repositories-and-credentials">
<a class="anchor" href="#tagging-ansible-playbooks-repositories-and-credentials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagging Ansible Playbooks, Repositories, and Credentials</h1>

<p>Apply tags to Ansible playbooks, repositories, and credentials to
categorize them. Tagging enables administrators to limit users to view
those Ansible elements that have been enabled for that set of user
permissions.</p>

<h2 id="adding-tags-to-ansible-playbooks">
<a class="anchor" href="#adding-tags-to-ansible-playbooks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Tags to Ansible Playbooks</h2>

<ol>
  <li>
    <p>Navigate to menu:Automate[Ansible &gt; Playbooks].</p>
  </li>
  <li>
    <p>Select the checkboxes for the Ansible playbooks to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/1851.png" alt="Edit
Tags"> (<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p>Select a customer tag to assign from the first list.</p>

    <p><img src="../images/2219.png" alt="2219"></p>
  </li>
  <li>
    <p>Select a value to assign from the second list.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h2 id="adding-tags-to-ansible-repositories">
<a class="anchor" href="#adding-tags-to-ansible-repositories" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Tags to Ansible Repositories</h2>

<ol>
  <li>
    <p>Navigate to menu:Automate[Ansible &gt; Repositories].</p>
  </li>
  <li>
    <p>Select the checkboxes for the Ansible repositories to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/1851.png" alt="Edit
Tags"> (<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p>Select a customer tag to assign from the first list.</p>

    <p><img src="../images/2219.png" alt="2219"></p>
  </li>
  <li>
    <p>Select a value to assign from the second list.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h2 id="adding-tags-to-ansible-credentials">
<a class="anchor" href="#adding-tags-to-ansible-credentials" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Tags to Ansible Credentials</h2>

<ol>
  <li>
    <p>Navigate to menu:Automate[Ansible &gt; credentials].</p>
  </li>
  <li>
    <p>Select the checkboxes for the Ansible credentials to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/1851.png" alt="Edit
Tags"> (<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p>Select a customer tag to assign from the first list.</p>

    <p><img src="../images/2219.png" alt="2219"></p>
  </li>
  <li>
    <p>Select a value to assign from the second list.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h1 id="optimizing-ansible-playbooks-for-manageiq">
<a class="anchor" href="#optimizing-ansible-playbooks-for-manageiq" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optimizing Ansible Playbooks for ManageIQ</h1>

<p>Ansible is a simple model-driven configuration management, multi-node
deployment, and remote-task execution system. When designing playbooks
for use with ManageIQ it is helpful to utilize solutions
within the playbook itself to ensure optimal implementation of
playbook-backed services or automated processes.</p>

<p>This section is intended to complement the existing documentation on
Ansible playbooks and guide administrators through optimizing playbooks
for use with ManageIQ.</p>

<h2 id="installing-roles-on-an-embedded-ansible-appliance">
<a class="anchor" href="#installing-roles-on-an-embedded-ansible-appliance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing Roles on an Embedded Ansible Appliance</h2>

<p>Roles are ways of automatically loading certain variable files, tasks,
and handlers based on a known file structure. Grouping content by roles
also allows easy sharing of roles with other users. Install roles on a
ManageIQ appliance with the Embedded Ansible server role
activated to optimize playbooks.</p>

<p>When using this role in a playbook on a ManageIQ
appliance, add an empty <code class="language-plaintext highlighter-rouge">roles</code> directory at the root of the playbook.
In the <code class="language-plaintext highlighter-rouge">roles</code> directory, include a <code class="language-plaintext highlighter-rouge">requirements.yml</code> file with the
following contents:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
- src: &lt;ansible-galaxy-role&gt;
</code></pre></div></div>

<p>ManageIQ will automatically install the role once it sees
the <code class="language-plaintext highlighter-rouge">requirements.yml</code> file in the playbook.</p>

<h2 id="ansible-service-linking">
<a class="anchor" href="#ansible-service-linking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ansible Service Linking</h2>

<p>ManageIQ provides a module allowing inventoried resources such as
virtual machines created using Ansible playbooks to link back to the
services used to generate them. During service ordering of a playbook
the <code class="language-plaintext highlighter-rouge">add_provider_vms</code> module will allow the playbook to connect back to
the worker appliance and identify the provider resources it was
responsible for generating. Once linked, the newly generated resources
are available to ManageIQ’s life cycle management
features.</p>

<p>Linking VMs back to the service that created it requires implementing
the following tasks in the playbook used for provisioning:</p>

<ol>
  <li>
    <p>Create a resource and register it.</p>
  </li>
  <li>
    <p>Link the service using the <code class="language-plaintext highlighter-rouge">add_provider_vms</code> method to the newly
created resource.</p>
  </li>
</ol>

<h3 id="example-linking-a-virtual-machine-to-a-service">
<a class="anchor" href="#example-linking-a-virtual-machine-to-a-service" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example: Linking a virtual machine to a service</h3>

<p>In the following playbook task examples, a virtual machine is deployed
to Amazon EC2 and linked back to the service. Examples are provided for
linking the resource to its service by both an <em>href slug</em> and as an
object.</p>

<p><strong>Note:</strong></p>

<ul>
  <li>
    <p>This example utilizes the `syncrou.manageiq-vmdb` role. This role allows ManageIQ users to modify and/or change VMDB objects using an Ansible playbook. For information on implementing and utilizing roles when writing Ansible playbooks for ManageIQ, see <a href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/administration_guide/chap-Automating_RHV_Configuration_using_Ansible#Installing_Ansible_Roles">Installing Ansible Roles</a>.</p>
  </li>
  <li>
    <p>For more information on Ansible Galaxy and roles, see the <a href="http://docs.ansible.com/ansible/latest/galaxy.html">Ansible Galaxy documentation</a>.</p>
  </li>
  <li>
    <p>Note the provider ID in order to successfully link to the service.</p>
  </li>
</ul>

<ol>
  <li>
    <p>Create and register the resource.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>- name: Create Ec2 Instance
  ec2:
    key_name: ""
    instance_tags: {Name: ""}
    group_id: ""
    instance_type: ""
    region: ""
    image: ""
    wait: yes
    count: 1
    vpc_subnet_id: ""
    assign_public_ip: yes
  register: ec2
</code></pre></div>    </div>
  </li>
  <li>
    <p>Call the <code class="language-plaintext highlighter-rouge">add_provider_vms</code> method as an action to link to the
service via an <em>href slug</em> or an object.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>- name: Service Linking via an href slug
  manageiq_vmdb:
    href: "href_slug::services/80"
    action: add_provider_vms
    data:
      uid_ems:
        - ""
      provider:
        id: 24

- name: Service Linking via an object
  manageiq_vmdb:
    vmdb: ""
    action: add_provider_vms
    data:
      uid_ems:
        - ""
      provider:
        id: 24
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="modifying-the-automate-workspace-using-the-manageiq-automate-role">
<a class="anchor" href="#modifying-the-automate-workspace-using-the-manageiq-automate-role" aria-hidden="true"><span class="octicon octicon-link"></span></a>Modifying the Automate Workspace Using the <code class="language-plaintext highlighter-rouge">manageiq-automate</code> Role.</h3>

<p>The <code class="language-plaintext highlighter-rouge">manageiq-automate</code> role allows users of ManageIQ Automate to
modify and add to the automate workspace via an Ansible playbook.</p>

<p><strong>Note:</strong></p>

<p>When using this role in a playbook on a ManageIQ appliance with
Embedded Ansible activated, add an empty <code class="language-plaintext highlighter-rouge">roles</code> directory at the root
of the playbook. In the <code class="language-plaintext highlighter-rouge">roles</code> directory, include a <code class="language-plaintext highlighter-rouge">requirements.yml</code>
file with the following contents:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
- src: syncrou.manageiq-automate
</code></pre></div></div>

<p>ManageIQ will automatically install the role once it sees
the <code class="language-plaintext highlighter-rouge">requirements.yml</code> file in the playbook.</p>

<h4 id="role-variables">
<a class="anchor" href="#role-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Role Variables</h4>

<p>The <code class="language-plaintext highlighter-rouge">manageiq_automate</code> role employs the following variables when
implemented in a playbook run on a ManageIQ appliance.
Variables are defined in <code class="language-plaintext highlighter-rouge">defaults/main.yml</code> and <code class="language-plaintext highlighter-rouge">vars/main.yml</code>.</p>

<p><em>auto_commit</em>: By default is set to <code class="language-plaintext highlighter-rouge">True</code>. If set to False it will not
auto commit back to ManageIQ each call to a <code class="language-plaintext highlighter-rouge">set_</code> method
in the <code class="language-plaintext highlighter-rouge">manageiq_automate</code> module.</p>

<p><em>manageiq_validate_certs</em>: By default is set to <code class="language-plaintext highlighter-rouge">True</code>. If passed in
via <em>extra_vars</em> or assigned in the playbook variables then the lookup
will allow self-signed certificates to be used when using SSL REST API
connection URLs.</p>

<h4 id="example-playbook">
<a class="anchor" href="#example-playbook" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Playbook</h4>

<p>The example below utilizes the <code class="language-plaintext highlighter-rouge">manageiq-automate</code> role. Using variable
substitution, playbook tasks retrieve method parameters which are then
used to modify object attributes. A final task uses the <code class="language-plaintext highlighter-rouge">set_retry</code>
module to update the retry interval.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- name: Siphon Method Parameters into an object
  hosts: localhost
  connection: local
  vars:
  - auto_commit: True
  - object: root
  - interval: 600

  gather_facts: False
  roles:
  - syncrou.manageiq-automate

  tasks:
    - name: "Get the list of Method Parameters"
      manageiq_automate:
        workspace: ""
        get_method_parameters: yes
      register: method_params

    - name: "Set attributes"
      manageiq_automate:
        workspace: ""
        set_attributes:
          object: ""
          attributes: ""

    - name: Set Retry
      manageiq_automate:
        workspace: ""
        set_retry:
          interval: ""
</code></pre></div></div>

<h2 id="callbacks-in-multiple-appliance-environments">
<a class="anchor" href="#callbacks-in-multiple-appliance-environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Callbacks in Multiple Appliance Environments</h2>

<p>In a ManageIQ multiple appliance environment, enable the Embedded
Ansible server role on a dedicated ManageIQ appliance. Add
<code class="language-plaintext highlighter-rouge">store_session:sql</code> to Ansible playbooks to ensure successful callbacks
to ManageIQ appliances in a multiple appliance
environment.</p>

<h3 id="ansible-tower">
<a class="anchor" href="#ansible-tower" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ansible Tower</h3>

<p>Ansible Tower is a management tool integrated with ManageIQ,
designed to help automate infrastructure operations. ManageIQ
allows you to execute Ansible Tower jobs or workflows using service
catalogs and Automate. No custom configuration or Ruby scripting is
needed in ManageIQ, as configuration is done in Ansible
Tower using playbooks.</p>

<p>You can use the large library of existing Ansible playbooks as
ManageIQ state machines to automate tasks such as
deployments, backups, package updates, and maintenance in your
ManageIQ environment. This can be particularly useful for quickly
applying changes across large environments with many virtual machines or
instances.</p>

<p>Using Ansible Tower, you can schedule Ansible playbook runs and monitor
current and historical results, allowing for troubleshooting or
identification of issues before they occur.</p>

<p>ManageIQ supports Ansible Tower API v2 provider
integration.</p>

<h4 id="working-with-an-ansible-tower-provider">
<a class="anchor" href="#working-with-an-ansible-tower-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Working with an Ansible Tower Provider</h4>

<p>The basic workflow when using ManageIQ with an Ansible Tower
provider is as follows:</p>

<ol>
  <li>
    <p>Create an Ansible playbook which performs a specific task.</p>
  </li>
  <li>
    <p>A new Ansible Tower job template is created from the playbook (or
workflow template created from disparate jobs), which is then
retrieved by ManageIQ.</p>
  </li>
  <li>
    <p>From the Ansible Tower job or workflow template, create a new
catalog item in ManageIQ, optionally with a service
dialog that allows the user to enter parameters if needed.</p>
  </li>
  <li>
    <p>The user orders the service from the ManageIQ user
interface, and fills out any additional arguments (for example,
limiting the task to run on a specific set of virtual machines).</p>
  </li>
  <li>
    <p>The job or workflow executes.</p>
  </li>
</ol>

<p><strong>Note:</strong></p>

<ul>
  <li>
    <p>For more information on Ansible playbooks, see the <a href="https://docs.ansible.com/ansible/playbooks.html">Ansible playbook documentation</a>.</p>
  </li>
  <li>
    <p>For more information on worklows, see
<a href="https://docs.ansible.com/ansible-tower/latest/html/userguide/workflows.html">Workflows</a>
in the Ansible Tower <em>User Guide</em>.</p>
  </li>
</ul>

<h4 id="adding-an-ansible-tower-provider">
<a class="anchor" href="#adding-an-ansible-tower-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding an Ansible Tower Provider</h4>

<p>To access your Ansible Tower inventory from ManageIQ, you must
add Ansible Tower as a provider.</p>

<p><strong>Note:</strong></p>

<ul>
  <li>
    <p>Ensure <strong>ENABLE HTTP BASIC AUTH</strong> is set to <strong>On</strong> in the Ansible
Tower configuration settings before adding the provider. See <a href="https://docs.ansible.com/ansible-tower/latest/html/administration/configure_tower_in_tower.html">Tower
Configuration</a>
in the Ansible Tower <em>Administration Guide</em>.</p>
  </li>
  <li>
    <p>A trailing slash is <strong>not</strong> required at the end of the Ansible Tower
provider URL. Adding the trailing slash to the provider URL may
result in a validation error.</p>
  </li>
</ul>

<ol>
  <li>
    <p>Navigate to menu: <strong>Automation &gt; Ansible Tower &gt; Explorer</strong> and click on the <strong>Providers</strong> accordion tab.</p>
  </li>
  <li>
    <p>Under <img src="../images/1847.png" alt="Configuration"> <strong>Configuration</strong>, click
<img src="../images/1862.png" alt="Add a new Provider"> <strong>Add a new Provider</strong>.</p>
  </li>
  <li>
    <p>In the <strong>Add a new Provider</strong> area:</p>

    <p><img src="../images/add-ansible-tower-provider.png" alt="Add_Ansible_Provider"></p>

    <ol>
      <li>
        <p>Enter a <strong>Name</strong> for the new provider.</p>
      </li>
      <li>
        <p>Add a <strong>Zone</strong> for the provider.</p>
      </li>
      <li>
        <p>Enter the <strong>URL</strong> location or IP address to the Ansible Tower server. Add a trailing slash to the end of the Ansible Tower provider URL.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Select the <strong>Verify Peer Certificate</strong> checkbox if desired.</p>
  </li>
  <li>
    <p>In the <strong>Credentials</strong> area, provide the <strong>Username</strong> and
<strong>Password</strong>, and <strong>Confirm Password</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Validate</strong> to verify credentials.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<p>After adding the Ansible Tower provider, refresh its relationships and power states in order to view the current inventory.</p>

<h4 id="refreshing-an-ansible-tower-provider">
<a class="anchor" href="#refreshing-an-ansible-tower-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refreshing an Ansible Tower Provider</h4>

<p>Refresh relationships of all items related to an existing Ansible Tower configuration management provider including inventory, hosts, virtual machines, and clusters.</p>

<p>You can refresh inventory from ManageIQ, or by enabling the
<strong>Update on Launch</strong> option for inventory groups in Ansible Tower. The
<strong>Update on Launch</strong> option allows Ansible Tower to automatically update inventory using a dynamic inventory script before launching an Ansible Tower job from a playbook. See the <a href="http://docs.ansible.com/ansible-tower/index.html">Ansible Tower documentation</a> for more information.</p>

<p><strong>Important</strong></p>

<p>It can take a long time to retrieve information from providers containing many virtual machines or instances. The Ansible Tower dynamic inventory script can be modified to limit updates to specific items and
reduce refresh time.</p>

<p>To refresh an Ansible Tower provider’s inventory in ManageIQ:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Automation &gt; Ansible Tower &gt; Explorer</strong> and click the <strong>Providers</strong> accordion tab.</p>
  </li>
  <li>
    <p>Select the checkboxes for the Ansible Tower providers to refresh under <strong>All Ansible Tower Providers</strong>.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and
then <img src="../images/2003.png" alt="Refresh Relationships and Power States">
(<strong>Refresh Relationships and Power States</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<p>ManageIQ then queries the Ansible Tower API and obtains an
inventory of all available hosts, job and workflow templates.</p>

<h4 id="viewing-ansible-tower-providers-and-inventory">
<a class="anchor" href="#viewing-ansible-tower-providers-and-inventory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing Ansible Tower Providers and Inventory</h4>

<p>ManageIQ automatically updates its inventory from Ansible Tower.
This includes system groups (known as Inventories in Ansible Tower),
basic information about individual systems, and available Ansible Tower
job or workflow templates to be executed from the service catalog or
Automate.</p>

<p><strong>Note:</strong></p>

<p>To view and access Ansible Tower inventories and job or workflow templates in ManageIQ, you must first create them in Ansible Tower.</p>

<p>To view a list of Ansible Tower providers and inventory:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Automation &gt; Ansible Tower &gt; Explorer</strong>.</p>
  </li>
  <li>
    <p>select the <strong>Providers</strong> accordion menu to display a list of <strong>All Ansible Tower Providers</strong>.</p>
  </li>
  <li>
    <p>Select your Ansible Tower provider to expand and list the inventory groups on that Ansible Tower system. The inventory groups can be expanded to view the systems contained within each group, as well as configuration details for these systems.</p>
  </li>
</ol>

<p>Similarly, all discovered job and workflow templates are accessed under the provider by expanding the menu: <strong>Automation &gt; Ansible Tower &gt; Explorer</strong> and click the <strong>Templates</strong> accordion menu.</p>

<h4 id="viewing-ansible-tower-configured-systems">
<a class="anchor" href="#viewing-ansible-tower-configured-systems" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing Ansible Tower Configured Systems</h4>

<p>To view the systems in your Ansible Tower inventory:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Automation &gt; Ansible Tower &gt; Explorer</strong> and click <strong>Configured Systems</strong>.</p>
  </li>
  <li>
    <p>Under <strong>All Ansible Tower Configured Systems</strong>, select <strong>Ansible Tower Configured Systems</strong> to display a list.</p>
  </li>
</ol>

<h4 id="executing-an-ansible-tower-job-or-workflow-template-from-a-service-catalog">
<a class="anchor" href="#executing-an-ansible-tower-job-or-workflow-template-from-a-service-catalog" aria-hidden="true"><span class="octicon octicon-link"></span></a>Executing an Ansible Tower Job or Workflow Template from a Service Catalog</h4>

<p>You can execute an Ansible Tower playbook from ManageIQ by creating a service catalog item from an Ansible Tower job or workflow template.</p>

<p><strong>Important:</strong></p>

<p>You must first create the job or workflow template in Ansible Tower. The job or workflow templates are automatically discovered by ManageIQ when refreshing your Ansible Tower provider’s inventory.</p>

<p>First, create a catalog:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Services &gt; Catalogs</strong> and click <strong>Catalog Items</strong>.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/1862.png" alt="Add a New Catalog"> (<strong>Add a New Catalog</strong>)</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> and <strong>Description</strong> for the catalog.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<p>Then, create an Ansible Tower service catalog item:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Automation &gt; Ansible Tower &gt; Explorer</strong>, then click the <strong>Templates</strong> according menu.</p>
  </li>
  <li>
    <p>Click <strong>Ansible Tower Templates</strong> and select an Ansible Tower job or workflow template.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/1862.png" alt="Create Service Dialog from Template"> (<strong>Create Service Dialog from this Template</strong>).</p>
  </li>
  <li>
    <p>Enter a <strong>Service Dialog Name</strong> (for example,
<em>ansible_tower_job</em>)and click <strong>Save</strong>.</p>
  </li>
  <li>
    <p>Navigate to menu: <strong>Services &gt; Catalogs</strong> and click <strong>Catalog Items</strong>.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
<img src="../images/1862.png" alt="Add a New Catalog Item"> (<strong>Add a New Catalog Item</strong>) to create a new catalog item with the following details, at minimum:</p>

    <ul>
      <li>
        <p>For <strong>Catalog Item type</strong>, select <strong>Ansible Tower</strong>.</p>
      </li>
      <li>
        <p>Enter a <strong>Name</strong> for the service catalog item.</p>
      </li>
      <li>
        <p>Select <strong>Display in Catalog</strong>.</p>
      </li>
      <li>
        <p>In <strong>Catalog</strong>, select the catalog you created previously.</p>
      </li>
      <li>
        <p>In <strong>Dialog</strong>, select the service dialog you created previously
(in this example, <em>ansible_tower_job</em>). To ask the user to enter extra information when running the task, <strong>Service Dialog</strong> must be selected. A dialog is required if <strong>Display in Catalog</strong> is chosen.</p>
      </li>
      <li>
        <p>In <strong>Provider</strong>, select your Ansible Tower provider. This brings up the <strong>Ansible Tower Template</strong> option and configures the
<strong>Provisioning Entry Point State Machine</strong> automatically.</p>
      </li>
      <li>
        <p>Add configuration information for <strong>Reconfigure Entry Point</strong> and <strong>Retirement Entry Point</strong> as applicable.</p>
      </li>
      <li>
        <p>Select your desired <strong>Ansible Tower Template</strong> from the list.
Generally, this is the Ansible Tower job or workflow template previously used to create the service dialog.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Add</strong>. The catalog item you created will appear in the <strong>All Service Catalog Items</strong> list.</p>
  </li>
</ol>

<p>To execute the Ansible Tower job:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Service &gt; Catalogs</strong> and click on <strong>Service Catalogs</strong> then click <strong>Ansible Tower catalog</strong>.</p>

    <p><img src="../images/order_at_catalog_item.png" alt="order at catalog item"></p>
  </li>
  <li>
    <p>Click <strong>Order</strong> for the catalog item.</p>
  </li>
  <li>
    <p>Enter any variables requested and click <strong>Submit</strong>.</p>
  </li>
</ol>

<p>ManageIQ takes you to the <strong>Requests</strong> queue page and show the
status of the job.</p>

<p>The service item’s details can be viewed in menu: <strong>Services &gt; My Services</strong> in ManageIQ.</p>

<p><strong>Note:</strong></p>

<p>Instead of running a single job at a time, multiple service catalog items can also be grouped together as a catalog bundle to create one deployment with multiple job templates. See <a href="../provisioning_virtual_machines_and_hosts/index.html#catalogs-and-services">Catalogs and Services</a> in <em>Provisioning Virtual Machines and Hosts</em> for more information.</p>

<h4 id="executing-an-ansible-tower-job-using-a-custom-automate-button">
<a class="anchor" href="#executing-an-ansible-tower-job-using-a-custom-automate-button" aria-hidden="true"><span class="octicon octicon-link"></span></a>Executing an Ansible Tower Job Using a Custom Automate Button</h4>

<p>ManageIQ can execute Ansible Tower jobs on virtual machines or
instances using custom buttons in Automate.</p>

<p>Ansible Tower jobs can either be non-customizable, which do not require any extra configuration from the user, or alternatively, they can allow the user to specify a parameter (for example, a package name to install). In Ansible Tower jobs containing a dialog, ManageIQ accepts additional information from the user and adds it to the appropriate API call in Automate, and then sends it into Ansible Tower.</p>

<p><strong>Prerequisites.</strong></p>

<p>Before creating an Automate button to execute an Ansible Tower job, the following must be configured:</p>

<ul>
  <li>
    <p>An Ansible playbook in Ansible Tower. See the <a href="https://docs.ansible.com/">Ansible Tower documentation</a> for instructions.</p>
  </li>
  <li>
    <p>Ansible Tower must be able to reach virtual machines or instances deployed by ManageIQ at the IP level.</p>
  </li>
  <li>
    <p>The virtual machine template must have the Ansible Tower environment’s public SSH key injected. For cloud instances, <code class="language-plaintext highlighter-rouge">cloud-init</code> can be used and the public SSH key can be passed without rebuilding the image.</p>
  </li>
  <li>
    <p>Any dynamic inventory scripts used must be configured to return the virtual machine names exactly as they are stored in ManageIQ, without the UUID appended.</p>
  </li>
</ul>

<p><strong>Executing an Ansible Tower Job using a Custom Automate Button.</strong></p>

<p>To configure a custom button to execute an Ansible Tower job on a virtual machine or instance, first create the button:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Automation &gt; Automate &gt; Customization</strong>.</p>
  </li>
  <li>
    <p>Click the <strong>Buttons</strong> accordion menu.</p>
  </li>
  <li>
    <p>Click menu: <strong>VM and Instance</strong> &gt; <strong>Unassigned Buttons</strong>. This configures the button to run on virtual machines or instances.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then click
<img src="../images/1862.png" alt="1862"> (<strong>Add a new Button</strong>).</p>

    <ul>
      <li>
        <p>In the <strong>Adding a new Button</strong> screen, configure the <strong>Action</strong> parameters as desired. <strong>Dialog</strong> can be left blank if the playbook does not require extra variables. To ask the user to enter extra information when running the task, <strong>Service Dialog</strong> must be selected.</p>
      </li>
      <li>
        <p>Configure <strong>Object Details</strong> fields with the following request details:</p>

        <ul>
          <li>
            <p>For <strong>System/Process</strong>, select <strong>Request</strong>.</p>
          </li>
          <li>
            <p>For <strong>Message</strong>, enter <strong>create</strong>.</p>
          </li>
          <li>
            <p>For <strong>Request</strong>, enter <strong>Ansible_Tower_Job</strong>.</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Configure <strong>Attribute/Value Pairs</strong> with the following
parameters:</p>

        <ul>
          <li>
<strong>job_template_name</strong> is the Ansible Tower job template
name to associate with the button. The
<strong>job_template_name</strong> field is mandatory; other parameters
are provided by the Tower job dialog.</li>
        </ul>
      </li>
      <li>
        <p>Configure <strong>Visibility</strong> to all users, or limit visibility by
role as desired.</p>

        <p><img src="../images/add_button.png" alt="add button"></p>
      </li>
      <li>
        <p>Click <strong>Add</strong>.</p>
      </li>
    </ul>
  </li>
</ol>

<p>If you do not have an existing button group to assign the new button to, create a new button group:</p>

<ol>
  <li>
    <p>From menu: <strong>Automation &gt; Automate &gt; Customization</strong>, navigate to menu: <strong>Buttons</strong> and click <strong>VM and Instance &gt; Add a new Button Group</strong>, and configure the following:</p>

    <ul>
      <li>
        <p>Configure <strong>Basic Info</strong> as desired. For example, name the button group <code class="language-plaintext highlighter-rouge">VM Actions</code>.</p>
      </li>
      <li>
        <p>In <strong>Assign Buttons</strong>, select the button you just created from
the <strong>Unassigned</strong> list and click <img src="../images/1876.png" alt="1876"> to
assign it to <strong>Selected</strong>.</p>

        <p><img src="../images/create_button_group.png" alt="create button group"></p>
      </li>
      <li>
        <p>Click <strong>Add</strong>.</p>
      </li>
    </ul>
  </li>
</ol>

<p>To assign the button to an existing button group:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Buttons &gt; VM and Instance &gt; VM Actions &gt; Edit this Button Group</strong>.</p>
  </li>
  <li>
    <p>In <strong>Assign Buttons</strong>, select the button you just created from the <strong>Unassigned</strong> list and click <img src="../images/1876.png" alt="1876"> to assign it to <strong>Selected</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<p>To use the button to run an Ansible Tower job on a virtual machine:</p>

<ol>
  <li>
    <p>Navigate to menu: <strong>Compute &gt; Infrastructure &gt; Virtual Machines</strong>.</p>
  </li>
  <li>
    <p>Select the virtual machine to run the Ansible Tower job template on.</p>
  </li>
  <li>
    <p>Click the <strong>VM Actions</strong> button to show the button you created, and
click the button from the list to run the Ansible Tower job
template.</p>

    <p><img src="../images/run_update_button.png" alt="run update button"></p>
  </li>
  <li>
    <p>Click <strong>Submit</strong> to execute the job.</p>
  </li>
</ol>

<p>ManageIQ then confirms the job has been executed.</p>

<p>If you selected a service dialog to run when creating the button,
ManageIQ will then prompt you to enter variables to complete the
task. After entering your desired parameters, ManageIQ takes you
to the <strong>Requests</strong> page.</p>

<p>The service item’s details can be viewed in menu: <strong>Services &gt; My Services</strong> in ManageIQ.</p>

<h1 id="cloud-providers">
<a class="anchor" href="#cloud-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cloud Providers</h1>

<p>In ManageIQ, a cloud provider is a cloud computing
environment that you can add to a ManageIQ appliance to
manage and interact with the resources in that environment. This chapter
describes the different types of cloud providers that you can add to
ManageIQ, and how to manage them. Most cloud providers are
added individually to ManageIQ. Additionally, Amazon EC2
and Azure cloud providers can be discovered automatically by
ManageIQ.</p>

<p>The web interface uses virtual thumbnails to represent cloud providers.
Each thumbnail contains four quadrants by default, which display basic
information about each provider:</p>

<p><img src="../images/cloudthumbnail.png" alt="cloudthumbnail"></p>

<ol>
  <li>
    <p>Number of instances</p>
  </li>
  <li>
    <p>Management system software</p>
  </li>
  <li>
    <p>Number of images</p>
  </li>
  <li>
    <p>Authentication status</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th>Icon</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="../images/2190.png" alt="2190"></td>
      <td>Validated: Valid authentication credentials have been added.</td>
    </tr>
    <tr>
      <td><img src="../images/2191.png" alt="2191"></td>
      <td>Invalid: Authentication credentials are invalid.</td>
    </tr>
    <tr>
      <td><img src="../images/2192.png" alt="2192"></td>
      <td>Unknown: Authentication status is unknown or no credentials have been entered.</td>
    </tr>
  </tbody>
</table>

<p>Provider authentication status</p>

<h2 id="openstack-providers">
<a class="anchor" href="#openstack-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenStack Providers</h2>

<h1 id="adding-openstack-providers">
<a class="anchor" href="#adding-openstack-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding OpenStack Providers</h1>

<p>ManageIQ supports operating with the OpenStack <code class="language-plaintext highlighter-rouge">admin</code> tenant.
When creating an OpenStack provider in ManageIQ, select the
OpenStack provider’s <code class="language-plaintext highlighter-rouge">admin</code> user because it is the default
administrator of the OpenStack <code class="language-plaintext highlighter-rouge">admin</code> tenant. When using the <code class="language-plaintext highlighter-rouge">admin</code>
credentials, a user in ManageIQ provisions into the <code class="language-plaintext highlighter-rouge">admin</code>
tenant, and sees images, networks, and instances that are associated
with the <code class="language-plaintext highlighter-rouge">admin</code> tenant.</p>

<p><strong>Note:</strong></p>

<p>In OpenStack, you must add <code class="language-plaintext highlighter-rouge">admin</code> as a member of all tenants that users want to access and use in ManageIQ.</p>

<p>See <a href="../managing_infrastructure_and_inventory/index.html#cloud-tenants">Cloud Tenants</a> in <em>Managing Infrastructure and Inventory</em> for information on working with OpenStack tenants (projects) in ManageIQ.</p>

<p>When adding an OpenStack cloud or infrastructure provider, enable
<em>tenant mapping</em> in ManageIQ to map any existing tenants
from that provider.</p>

<p>This means ManageIQ will create new cloud tenants to match
each existing OpenStack tenant; each new cloud tenant and its
corresponding OpenStack tenant will have identical resource assignments
(including user and role synchronization) with the exception of quotas.
Tenant quotas are not synchronized between ManageIQ and
OpenStack, and are available for reporting purposes only. You can manage
quotas in ManageIQ but this will not affect the quotas
created in OpenStack.</p>

<p>During a provider refresh, ManageIQ will also check for
any changes to the tenant list in OpenStack. ManageIQ will
create new cloud tenants to match any new tenants, and delete any cloud
tenants whose corresponding OpenStack tenants no longer exist.
ManageIQ will also replicate any changes to OpenStack
tenants to their corresponding cloud tenants.</p>

<p>If you leave tenant mapping disabled, ManageIQ will not
create cloud tenants or tenant object hierarchy from OpenStack.</p>

<p><strong>Note:</strong></p>

<p>You can set whether ManageIQ should use the Telemetry service or Advanced Message Queueing Protocol (AMQP) for event monitoring. If you choose Telemetry, you should first configure the <strong>ceilometer</strong> service on the overcloud to store events. See <a href="../managing_providers/index.html#configuring-the-overcloud-to-store-events">Configuring the Overcloud to Store Events</a> for instructions.</p>

<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html/architecture_guide/components#comp-telemetry" target="_blank">OpenStack Telemetry
(ceilometer)</a> in the Red Hat OpenStack Platform <em>Architecture Guide</em>.</p>

<p><strong>Note:</strong></p>

<p>To authenticate the provider using a self-signed Certificate Authority (CA), configure the ManageIQ appliance to trust the certificate using the steps in <a href="#app-self_signed_CA">Using a Self-Signed CA Certificate</a> before adding the provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then click
<img src="../images/1862.png" alt="1862"> (<strong>Add a New Cloud Provider</strong>).</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>From the <strong>Type</strong> list, select <strong>OpenStack</strong>.</p>
  </li>
  <li>
    <p>Select the appropriate <strong>API Version</strong> from the list. The default is
<code class="language-plaintext highlighter-rouge">Keystone v2</code>.</p>

    <p>If you select <code class="language-plaintext highlighter-rouge">Keystone v3</code>, enter the <code class="language-plaintext highlighter-rouge">Keystone V3 Domain ID</code> that
ManageIQ should use. This is the domain of the user account
you will be specifying later in the <strong>Default</strong> tab. If domains are
not configured in the provider, enter <strong>default</strong>.</p>

    <p><strong>Note:</strong></p>

    <p>Keystone API v3 is required to create cloud tenants on OpenStack
cloud providers.</p>

    <p><strong>Note:</strong></p>

    <ul>
      <li>With Keystone API v3, domains are used to determine administrative
boundaries of service entities in OpenStack. Domains allow you to
group users together for various purposes, such as setting
domain-specific configuration or security options. For more
information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/architecture_guide/#comp-identity">OpenStack Identity
(keystone)</a>
in the Red Hat OpenStack Platform <em>Architecture Guide</em>.</li>
    </ul>
  </li>
</ol>

<ul>
  <li>The provider you are creating will be able to see projects for the
given domain only. To see projects for other domains, add it as
another cloud provider. For more information on domain management in
OpenStack, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/users_and_identity_management_guide/#Domains">Domain
Management</a>
in the Red Hat OpenStack Platform <em>Users and Identity Management
Guide</em>.</li>
</ul>

<ol>
  <li>
    <p>Enter a region number in <strong>Region</strong>.</p>
  </li>
  <li>
    <p>Enter the appropriate <strong>Zone</strong> for the provider. If you do not
specify a zone, it is set to <code class="language-plaintext highlighter-rouge">default</code>.</p>
  </li>
  <li>
    <p>(Optional) Enable tenant mapping by toggling the <strong>Tenant Mapping
Enabled</strong> option to <strong>Yes</strong>. This synchronizes resources and users
between the OpenStack cloud provider and ManageIQ. By
default, tenant mapping is disabled.</p>
  </li>
  <li>
    <p>Select the appropriate <strong>Zone</strong> for the provider. By default, the
zone is set to <strong>default</strong>.</p>

    <p><strong>Note:</strong></p>

    <p>For more information, see the definition of host aggregates and availability zones in <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html/architecture_guide/components#comp-compute">OpenStack Compute (nova)</a> in the Red Hat OpenStack Platform <em>Architecture Guide</em>.</p>
  </li>
  <li>
    <p>In the <strong>Default</strong> tab, under <strong>Endpoints</strong>, configure the host and authentication details of your OpenStack provider:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to authenticate the provider:</p>

        <ul>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider insecurely using SSL.</p>
          </li>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted Certificate Authority. Select this option if the provider has a valid SSL certificate and it is signed by a trusted
Certificate Authority. No further configuration is required for this option. This is the recommended authentication
method.</p>
          </li>
          <li>
            <p><strong>Non-SSL</strong>: Connect to the provider insecurely using only
HTTP protocol, without SSL.</p>
          </li>
        </ul>
      </li>
      <li>
        <p>In <strong>Hostname (or IPv4 or IPv6 address)</strong>, enter the public IP
or fully qualified domain name of the OpenStack Keystone
service.</p>

        <p><strong>Note:</strong></p>

        <p>The hostname required here is also the <strong>OS_AUTH_URL</strong> value in the <strong>~/overcloudrc</strong> file generated by the director (see <a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html-single/director_installation_and_usage/#sect-Accessing_the_Overcloud">Accessing the Overcloud</a> in Red Hat OpenStack Platform <em>Director Installation and Usage</em>), or the <strong>~/keystonerc_admin</strong> file generated by Packstack (see <a href="https://access.redhat.com/articles/1127153">Evaluating OpenStack: Single-Node Deployment</a>).</p>
      </li>
      <li>
        <p>In <strong>API Port</strong>, set the public port used by the OpenStack
Keystone service. By default, OpenStack uses port 5000 for
non-SSL security protocol. For SSL, API port is 13000 by
default.</p>
      </li>
      <li>
        <p>In the <strong>Username</strong> field, enter the name of a user in the
OpenStack environment.</p>

        <div class="important">

In environments that use Keystone v3 authentication, the user
must have the **admin** role for the relevant domain.

</div>
      </li>
      <li>
        <p>In the <strong>Password</strong> field, enter the password for the user.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm ManageIQ can connect to the
OpenStack provider.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Next, configure how ManageIQ should receive events from the
OpenStack provider. Click the <strong>Events</strong> tab in the <strong>Endpoints</strong>
section to start.</p>

    <ul>
      <li>
        <p>To use the Telemetry service of the OpenStack provider, select <strong>Ceilometer</strong>. Before you do so, the provider must first be configured accordingly. See <a href="../managing_providers/index.html#configuring-the-overcloud-to-store-events">Configuring the Overcloud to Store Events</a> for details.</p>
      </li>
      <li>
        <p>If you prefer to use the AMQP Messaging bus instead, or eventing
is not enabled on Ceilometer, select <strong>AMQP</strong> and configure the
following:</p>

        <ol>
          <li>
            <p>Select a <strong>Security Protocol</strong> method.</p>
          </li>
          <li>
            <p>In <strong>Hostname (or IPv4 or IPv6 address)</strong> (of the <strong>Events</strong>
tab, under <strong>Endpoints</strong>), enter the public IP or fully
qualified domain name of the AMQP host.</p>
          </li>
          <li>
            <p>In the <strong>API Port</strong>, set the public port used by AMQP. By
default, OpenStack uses port 5672 for this.</p>
          </li>
          <li>
            <p>In the <strong>Username</strong> field, enter the name of an OpenStack
user with privileged access (for example, <strong>admin</strong>). Then,
provide its corresponding password in the <strong>Password</strong>
field.</p>
          </li>
          <li>
            <p>Click <strong>Validate</strong> to confirm the credentials.</p>
          </li>
        </ol>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Add</strong> after configuring the cloud provider.</p>
  </li>
</ol>

<p><strong>Note:</strong></p>

<ul>
  <li>
    <p>To collect inventory and metrics from an OpenStack environment, the
ManageIQ appliance requires that the adminURL endpoint for
the OpenStack environment be on a non-private network. Hence, the
OpenStack adminURL endpoint should be assigned an IP address other
than <code class="language-plaintext highlighter-rouge">192.168.x.x</code>. Additionally, all the Keystone endpoints must be
accessible, otherwise refresh will fail.</p>
  </li>
  <li>
    <p>Collecting capacity and utilization data from an OpenStack cloud provider requires selecting the <strong>Collect for All Clusters</strong> option under <strong>Configuration</strong>, in the settings menu. For information, see <a href="../general_configuration/index.html#capacity-and-utilization-collection">Capacity and Utilization Collections</a> in the <em>General Configuration Guide</em>.</p>
  </li>
</ul>

<h2 id="configuring-the-overcloud-to-store-events">
<a class="anchor" href="#configuring-the-overcloud-to-store-events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring the Overcloud to Store Events</h2>

<p>By default, the Telemetry service does not store events emitted by other
services in a Red Hat OpenStack Platform environment. The following
procedure outlines how to enable the Telemetry service on your OpenStack
cloud provider to store such events. This ensures that events are
exposed to ManageIQ when a Red Hat OpenStack Platform environment
is added as a cloud provider.</p>

<ol>
  <li>
    <p>Log in to the undercloud host.</p>
  </li>
  <li>
    <p>Create an environment file called <em>ceilometer.yaml</em>, and add the
following contents:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>parameter_defaults:
  CeilometerStoreEvents: true
</code></pre></div>    </div>
  </li>
  <li>
    <p>Please see the below <strong>NOTE</strong>.</p>
  </li>
</ol>

<p>If your OpenStack cloud provider was not deployed through the
undercloud, you can also set this manually. To do so:</p>

<ol>
  <li>
    <p>Log in to your Controller node.</p>
  </li>
  <li>
    <p>Edit <em>/etc/ceilometer/ceilometer.conf</em>, and specify the following
option:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>store_events = True
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>Note:</strong></p>

<p>Passing the newly created environment file to the overcloud deployment is environment specific and requires executing commands in particular order depending on use of variables. For further information please see
<a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/11/html/director_installation_and_usage/"><em>Director Installation and Usage</em></a>
in the Red Hat OpenStack Platform documentation.</p>

<h2 id="azure-providers">
<a class="anchor" href="#azure-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Azure Providers</h2>

<h1 id="adding-azure-providers">
<a class="anchor" href="#adding-azure-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Azure Providers</h1>

<p>ManageIQ supports Microsoft Azure providers. Before
ManageIQ can be authenticated to Microsoft Azure, you must
complete a series of prerequisite steps using the Azure portal; see
<a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/">Create Active Directory application and service principal account using
the Azure
portal</a>.
Follow the steps to set up an Azure Active Directory (Azure AD) and
assign the required permissions to it, then create an Azure Active
Directory application, and obtain the <strong>Application ID</strong> (Client ID),
<strong>Directory ID</strong> (Tenant ID), <strong>Subscription ID</strong>, and <strong>Key Value</strong>
(Client Key) that are required to add and connect to the Azure instance
as a provider in ManageIQ. Currently, all of these steps
can be performed using either the Azure Resource Manager or Service
Manager (Classic) mode.</p>

<p><strong>Note:</strong></p>

<p>In the steps described in <a href="https://azure.microsoft.com/en-us/documentation/articles/resource-group-create-service-principal-portal/">Create Active Directory application and service principal account using the Azure portal</a>:</p>

<ul>
  <li>
    <p>The <strong>Application ID</strong> obtained during <em>Get Application ID and
Authentication Key</em> is your <strong>Client ID</strong>. In the same section,
after providing a description and a duration for the key, the
<strong>VALUE</strong> displayed after clicking <strong>Save</strong> is your <strong>Client Key</strong>.
If you choose an expiring key, make sure to note the expiration
date, as you will need to generate a new key before that day in
order to avoid an interruption.</p>
  </li>
  <li>
    <p>The <strong>Directory ID</strong> obtained during <em>Get Tenant ID</em> is your
<strong>Tenant ID</strong>. In Azure Active Directory (Azure AD), a tenant is a
dedicated instance of the Azure AD service and is representative of
an organization. It houses the users in a company and the
information about them - their user profile data, permissions,
groups, applications, and other information related to an
organization and its security. To allow Azure AD users to sign in to
your application, you must register your application in a tenant of
your own which is assigned a Tenant ID (Directory ID).</p>
  </li>
  <li>
    <p>During <em>Assign Application to Role</em>, select the <strong>Contributor</strong> role
and not the <strong>Reader</strong> role.</p>
  </li>
  <li>
    <p>To obtain your <strong>Subscription ID</strong>, log in to the Azure portal and
click <strong>Subscriptions</strong> on the slide-out menu on the left. Find the
appropriate subscription and see your Azure <strong>Subscription ID</strong>
associated with it. Note that if the <strong>Subscriptions</strong> tab is not
visible, then click on <strong>More services &gt;</strong> to find it. The Azure
<strong>Subscription ID</strong> is like a billing unit for all of the services
consumed in your Azure account, including virtual machines and
storage. The <strong>Subscription ID</strong> is in the form of a Globally Unique
Identifier (GUID).</p>
  </li>
</ul>

<p>So, after a service principal account (instance of an application in a directory) has been created using the Azure portal, the following four pieces of information will be available within the Azure AD module.</p>

<ul>
  <li>
    <p>Directory ID (Tenant ID)</p>
  </li>
  <li>
    <p>Subscription ID</p>
  </li>
  <li>
    <p>Application ID (Client ID)</p>
  </li>
  <li>
    <p>Client Key</p>
  </li>
</ul>

<p>You can now use these values in the procedure below to add an Azure cloud instance as a provider to ManageIQ.</p>

<p><strong>To Add an Azure Cloud Provider</strong>:</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then click
<img src="../images/1862.png" alt="1862"> (<strong>Add a New Cloud Provider</strong>).</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>From the <strong>Type</strong> list, select <strong>Azure</strong>.</p>
  </li>
  <li>
    <p>Select a region from the <strong>Region</strong> list. One provider will be
created for the selected region.</p>
  </li>
  <li>
    <p>Enter <strong>Tenant ID</strong>.</p>
  </li>
  <li>
    <p>Enter <strong>Subscription ID</strong>.</p>
  </li>
  <li>
    <p>Enter <strong>Zone</strong>.</p>
  </li>
  <li>
    <p>In the <strong>Credentials</strong> section, enter the <strong>Client ID</strong> and <strong>Client
Key</strong>; click <strong>Validate</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h1 id="disabling-azure-cloud-regions">
<a class="anchor" href="#disabling-azure-cloud-regions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disabling Azure Cloud Regions</h1>

<p>ManageIQ allows administrators to disable Azure cloud regions on
the appliance server. You can use this capability to disable certain
classified regions. Once disabled, the region will not be available when
adding a new Azure provider.</p>

<ol>
  <li>
    <p>Click <img src="../images/config-gear.png" alt="config gear"> (<strong>Configuration</strong>).</p>
  </li>
  <li>
    <p>Click on the <strong>Settings</strong> accordion, then click <strong>Zones</strong>.</p>
  </li>
  <li>
    <p>Click the zone where the ManageIQ server is located,
then click on the EVM server.</p>
  </li>
  <li>
    <p>Click on the <strong>Advanced</strong> tab.</p>
  </li>
  <li>
    <p>Search for <code class="language-plaintext highlighter-rouge">:ems_azure:</code>, and enter the regions you want to disable
under <code class="language-plaintext highlighter-rouge">:disabled_regions:</code>.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>Example. To disable the `us-gov-arizona` and `us-gov-texas` regions:

:ems_azure:
  :disabled_regions:
  - us-gov-arizona
  - us-gov-texas
</code></pre></div>    </div>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h2 id="amazon-ec2-providers">
<a class="anchor" href="#amazon-ec2-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Amazon EC2 Providers</h2>

<h1 id="permissions-for-amazon-ec2-providers">
<a class="anchor" href="#permissions-for-amazon-ec2-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Permissions for Amazon EC2 Providers</h1>

<p>Further limiting API access limitations can limit Automate capabilities,
as Automate scripts directly access the AWS SDK to create brand new
application functionality.</p>

<p>The AWS services primarily accessed by the ManageIQ API
include:</p>

<ul>
  <li>
    <p>Elastic Compute Cloud (EC2)</p>
  </li>
  <li>
    <p>CloudFormation</p>
  </li>
  <li>
    <p>CloudWatch</p>
  </li>
  <li>
    <p>Elastic Load Balancing</p>
  </li>
  <li>
    <p>Simple Notification Service (SNS)</p>
  </li>
  <li>
    <p>Simple Queue Service (SQS)</p>
  </li>
</ul>

<h2 id="manually-creating-an-amazon-ec2-role">
<a class="anchor" href="#manually-creating-an-amazon-ec2-role" aria-hidden="true"><span class="octicon octicon-link"></span></a>Manually Creating an Amazon EC2 Role</h2>

<p>To eliminate the need to assign <em>Admin</em> group privileges to the Amazon
EC2 provider, create an IAM role following the procedure described in
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-service.html">Creating a Role for an AWS Service
(Console)</a>
in the Amazon Web Services documentation.</p>

<p>Use the following parameters:</p>

<ol>
  <li>
    <p>Select <strong>EC2</strong> as the service the role will use.</p>
  </li>
  <li>
    <p>Attach the following permissions:</p>

    <ol>
      <li>
        <p><code class="language-plaintext highlighter-rouge">AmazonEC2FullAccess</code></p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">AmazonS3FullAccess</code></p>
      </li>
      <li>
        <p><code class="language-plaintext highlighter-rouge">AmazonSQSFullAccess</code></p>
      </li>
    </ol>
  </li>
  <li>
    <p>Enter <code class="language-plaintext highlighter-rouge">smartstate</code> for the <strong>Role name</strong>.</p>
  </li>
</ol>

<p>Once the IAM role is created, assign the provider <em>Power User</em>
privileges as described in <a href="#amazon-provider-permissions">???</a>.</p>

<h1 id="adding-amazon-ec2-providers">
<a class="anchor" href="#adding-amazon-ec2-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Amazon EC2 Providers</h1>

<p>Complete the following procedure to add an Amazon EC2 cloud provider in
ManageIQ.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then click
<img src="../images/1862.png" alt="1862"> (<strong>Add a New Cloud Provider</strong>).</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>From the <strong>Type</strong> list, select <strong>Amazon EC2</strong>.</p>
  </li>
  <li>
    <p>Select a <strong>Region</strong>.</p>
  </li>
  <li>
    <p>Select the appropriate <strong>Zone</strong> if you have more than one available.</p>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong>, click the <strong>Default</strong> tab.</p>

    <ol>
      <li>
        <p>Enter the <strong>Endpoint URL</strong>.</p>

        <p><strong>Note:</strong></p>

        <p>AWS allows users to set a custom endpoint URL when connecting to certain services, which you can add in the ManageIQ user interface per Amazon EC2 provider.
See <a href="https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/vpce-interface.html">Interface VPC Endpoints (AWS PrivateLink)</a>
for more information.</p>
      </li>
      <li>
        <p>Generate an <strong>Access Key</strong> in the <strong>Security Credentials</strong> of
your Amazon AWS account. The <strong>Access Key ID</strong> acts as your
<strong>User ID</strong>, and your <strong>Secret Access Key</strong> acts as your
<strong>Password</strong>.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to validate the credentials.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click the <strong>SmartState Docker</strong> tab.</p>

    <ol>
      <li>Enter the <strong>SmartState Docker User Name</strong> and <strong>SmartState
Docker Password</strong>.</li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h1 id="enabling-public-amis-from-amazon-ec2">
<a class="anchor" href="#enabling-public-amis-from-amazon-ec2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling Public AMIs from Amazon EC2</h1>

<p>By default, public AMIs from an Amazon EC2 provider are not viewable in
ManageIQ. To make these images viewable, you must edit the main
configuration file for the appliance.</p>

<p><strong>Note:</strong></p>

<p>Syncing all public images may require additional memory resources. Also,
bear in mind that syncing happens in each configured Amazon EC2
provider, which will require a similar amount of total memory resources.</p>

<ol>
  <li>
    <p>Navigate to the settings menu, then menu:Configuration[Zone &gt;
Advanced].</p>
  </li>
  <li>
    <p>Select the configuration file to edit from the <strong>File</strong> list. If not
already automatically selected, select <strong>EVM Server Main
Configuration</strong>.</p>
  </li>
  <li>
    <p>Set the <strong>get_public_images</strong> parameter:</p>

    <ol>
      <li>
        <p>Set the parameter to <strong>get_public_images: true</strong> to make
public images viewable.</p>
      </li>
      <li>
        <p>Set the parameter to <strong>get_public_images: false</strong> to make
public images not viewable.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Optionally, configure an array of filters in
<strong>public_images_filters</strong> to restrict which images are synced. See
<a href="http://docs.aws.amazon.com/sdkforruby/api/Aws/EC2/Client.html#describe_images-instance_method">http://docs.aws.amazon.com/sdkforruby/api/Aws/EC2/Client.html#describe_images-instance_method</a>
for more details.</p>
  </li>
</ol>

<h1 id="enabling-aws-config-notifications">
<a class="anchor" href="#enabling-aws-config-notifications" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling AWS Config Notifications</h1>

<p>Amazon’s AWS Config notifies subscribers of changes in a region through
its Simple Notification Service (SNS). ManageIQ subscribes to the
SNS service for AWS Config deltas and converts the deltas into
ManageIQ events.</p>

<ol>
  <li>
    <p>Enable the AWS Config service in the AWS Management Console. See the
<a href="http://aws.amazon.com/documentation/config/">AWS Config Developer
Guide</a> for more
information.</p>
  </li>
  <li>
    <p>Create a new Amazon SNS topic named <code class="language-plaintext highlighter-rouge">AWSConfig_topic</code>.
ManageIQ automatically connects to this topic.</p>
  </li>
  <li>
    <p>(Optional) Configure the frequency of delta creation in the AWS
Management Console.</p>
  </li>
</ol>

<p>You can assign ManageIQ policies to the AWS events listed
below. The appliance performs a provider refresh on all these events
except for <code class="language-plaintext highlighter-rouge">AWS_EC2_Instance_UPDATE</code>.</p>

<table>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Event</th>
<th>Policies</th>
<th>Refresh</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>AWS_EC2_Instance_CREATE</p></td>
<td>
<p>src_vm</p>
<p>vm_create</p>
</td>
<td><p>ems</p></td>
</tr>
<tr class="even">
<td><p>AWS_EC2_Instance_UPDATE</p></td>
<td><p>N/A</p></td>
<td><p>ems</p></td>
</tr>
<tr class="odd">
<td><p>AWS_EC2_Instance_running</p></td>
<td>
<p>src_vm</p>
<p>vm_start</p>
</td>
<td><p>ems</p></td>
</tr>
<tr class="even">
<td><p>AWS_EC2_Instance_stopped</p></td>
<td>
<p>src_vm</p>
<p>vm_power_off</p>
</td>
<td><p>ems</p></td>
</tr>
<tr class="odd">
<td><p>AWS_EC2_Instance_shutting-down</p></td>
<td>
<p>src_vm</p>
<p>vm_power_off</p>
</td>
<td><p>ems</p></td>
</tr>
</tbody>
</table>

<h1 id="enabling-amazon-ec2-events">
<a class="anchor" href="#enabling-amazon-ec2-events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling Amazon EC2 Events</h1>

<p>After adding an Amazon EC2 provider and configuring an SNS topic in <a href="#enabling-aws-config-notifications">Enabling AWS Config Notifications</a>, create a CloudTrail,
then configure CloudWatch rules on your EC2 provider to automatically get events in ManageIQ for monitoring the provider.</p>

<p><strong>Note:</strong></p>

<p>The following procedures are accurate at time of publishing. See the <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/">Amazon AWS documentation</a>
for further details on these steps.</p>

<h2 id="creating-a-cloudtrail">
<a class="anchor" href="#creating-a-cloudtrail" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a CloudTrail</h2>

<p>In the CloudTrail area of the AWS Management Console, create a trail and
an S3 bucket:</p>

<ol>
  <li>
    <p>Create a <strong>Trail</strong> with a custom name.</p>
  </li>
  <li>
    <p>(Optional) If you want to apply the trail to all of your
ManageIQ regions, select <strong>Yes</strong> for <strong>Apply trail to
all regions</strong>.</p>
  </li>
  <li>
    <p>For <strong>Management Events</strong>, select <strong>Read/Write events: All</strong>.</p>
  </li>
  <li>
    <p>Create a new S3 bucket.</p>
  </li>
</ol>

<h2 id="creating-cloudwatch-rules-based-on-event-patterns">
<a class="anchor" href="#creating-cloudwatch-rules-based-on-event-patterns" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating CloudWatch Rules Based on Event Patterns</h2>

<p>In the CloudWatch area of the AWS Management Console, create three
rules: one rule each for EC2, volumes, and snapshots.</p>

<div class="important">

When an SNS topic is deleted and recreated (manually or by
ManageIQ), CloudWatch rules must be recreated as well,
even though the SNS target topic for CloudWatch rules appears to be
assigned to these rules. The CloudWatch rule does not send events to
this recreated topic until it is recreated too.

</div>

<p>To create a CloudWatch rule for EC2:</p>

<ol>
  <li>
    <p>Navigate to menu:Events[Rules] and click <strong>Create rule</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>Event Pattern</strong> radio button to specify the event source.</p>
  </li>
  <li>
    <p>Edit the <strong>Event Pattern Preview</strong> box, and paste and save the following code to create a rule based on a custom event pattern:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{
  "source": [
    "aws.ec2"
  ],
  "detail-type": [
    "AWS API Call via CloudTrail"
  ],
  "detail": {
    "eventSource": [
      "ec2.amazonaws.com"
    ]
  }
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Click <strong>Add target</strong> and specify the following attributes:</p>

    <ul>
      <li>
        <p><strong>Type</strong>: <code class="language-plaintext highlighter-rouge">SNS Topic</code></p>
      </li>
      <li>
        <p><strong>Topic</strong>: <code class="language-plaintext highlighter-rouge">AWSConfig_topic</code></p>
      </li>
      <li>
        <p><strong>Input</strong>: <code class="language-plaintext highlighter-rouge">Matched event</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Configure Details</strong> to save these details.</p>
  </li>
  <li>
    <p>Configure a name and description for the rule if desired. Ensure the
<strong>Enabled</strong> checkbox is selected for <strong>State</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Create rule</strong> to save the CloudWatch rule.</p>
  </li>
</ol>

<p>Repeat the same procedure to create a CloudWatch rule for volumes,
pasting the code snippet below to the <strong>Event Pattern Preview</strong> box:</p>

<ol>
  <li>
    <p>Navigate to menu:Events[Rules] and click <strong>Create rule</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>Event Pattern</strong> radio button to specify the event
source.</p>
  </li>
  <li>
    <p>Edit the <strong>Event Pattern Preview</strong> box, and paste and save the
following code to create a rule based on a custom event pattern:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{
  "source": [
    "aws.ec2"
  ],
  "detail-type": [
    "EBS Volume Notification"
  ]
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Click <strong>Add target</strong> and specify the following attributes:</p>

    <ul>
      <li>
        <p><strong>Type</strong>: <code class="language-plaintext highlighter-rouge">SNS Topic</code></p>
      </li>
      <li>
        <p><strong>Topic</strong>: <code class="language-plaintext highlighter-rouge">AWSConfig_topic</code></p>
      </li>
      <li>
        <p><strong>Input</strong>: <code class="language-plaintext highlighter-rouge">Matched event</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Configure Details</strong> to save these details.</p>
  </li>
  <li>
    <p>Configure a name and description for the rule if desired. Ensure the
<strong>Enabled</strong> checkbox is selected for <strong>State</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Create rule</strong> to save the CloudWatch rule.</p>
  </li>
</ol>

<p>Repeat the same procedure to create a CloudWatch rule for snapshots,
pasting the code snippet below to the <strong>Event Pattern Preview</strong> box:</p>

<ol>
  <li>
    <p>Navigate to menu:Events[Rules] and click <strong>Create rule</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>Event Pattern</strong> radio button to specify the event
source.</p>
  </li>
  <li>
    <p>Edit the <strong>Event Pattern Preview</strong> box, and paste and save the
following code to create a rule based on a custom event pattern:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{
  "source": [
    "aws.ec2"
  ],
  "detail-type": [
    "EBS Snapshot Notification"
  ]
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Click <strong>Add target</strong> and specify the following attributes:</p>

    <ul>
      <li>
        <p><strong>Type</strong>: <code class="language-plaintext highlighter-rouge">SNS Topic</code></p>
      </li>
      <li>
        <p><strong>Topic</strong>: <code class="language-plaintext highlighter-rouge">AWSConfig_topic</code></p>
      </li>
      <li>
        <p><strong>Input</strong>: <code class="language-plaintext highlighter-rouge">Matched event</code></p>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Configure Details</strong> to save these details.</p>
  </li>
  <li>
    <p>Configure a name and description for the rule if desired. Ensure the
<strong>Enabled</strong> checkbox is selected for <strong>State</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Create rule</strong> to save the CloudWatch rule.</p>
  </li>
</ol>

<p>EC2 can now automatically refresh events in ManageIQ.</p>

<h1 id="disabling-amazon-cloud-regions">
<a class="anchor" href="#disabling-amazon-cloud-regions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disabling Amazon Cloud Regions</h1>

<p>ManageIQ allows administrators to disable Amazon cloud regions on
the appliance server. Use this capability to disable certain classified
regions like AWS GovCloud. Once disabled, the region will not be
available when adding an Amazon EC2 provider.</p>

<ol>
  <li>
    <p>Click <img src="../images/config-gear.png" alt="config gear"> (<strong>Configuration</strong>).</p>
  </li>
  <li>
    <p>Click on the <strong>Settings</strong> accordion, then click <strong>Zones</strong>.</p>
  </li>
  <li>
    <p>Click the zone where the ManageIQ server is located,
then click on the EVM server.</p>
  </li>
  <li>
    <p>Click on the <strong>Advanced</strong> tab.</p>
  </li>
  <li>
    <p>Search for <code class="language-plaintext highlighter-rouge">:ems_amazon:</code>, and enter the regions you want to disable
under <code class="language-plaintext highlighter-rouge">:disabled_regions:</code>.</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>Example. To disable the `ap-northeast-1` region:

:ems_amazon:
  :disabled_regions:
  - us-gov-west-1
  - ap-northeast-1
</code></pre></div>    </div>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<p><strong>Note:</strong></p>

<p>In AWS, Government regions are disabled by default. To enable a disabled
region, be sure to do so in the <code class="language-plaintext highlighter-rouge">production.yml</code> configuration file
manually.</p>

<h1 id="refreshing-cloud-providers">
<a class="anchor" href="#refreshing-cloud-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refreshing Cloud Providers</h1>

<p>Refresh a cloud provider to find other resources related to it. Ensure
the chosen cloud providers have the correct credentials before
refreshing.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Select the checkboxes for the cloud providers to refresh.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and
then <img src="../images/2003.png" alt="Refresh Relationships and Power States">
(<strong>Refresh Relationships and Power States</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<h1 id="tagging-cloud-providers">
<a class="anchor" href="#tagging-cloud-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagging Cloud Providers</h1>

<p>Apply tags to all cloud providers to categorize them together at the
same time.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Select the checkboxes for the Cloud Providers to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/1851.png" alt="Edit
Tags"> (<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p>Select a customer tag to assign from the first list.</p>

    <p><img src="../images/2219.png" alt="2219"></p>
  </li>
  <li>
    <p>Select a value to assign from the second list.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h1 id="removing-cloud-providers">
<a class="anchor" href="#removing-cloud-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing Cloud Providers</h1>

<p>A cloud provider might require removal from the VMDB if it is no longer
in use.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Check the cloud providers to remove.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and
then <img src="../images/2098.png" alt="Remove Cloud Providers from the VMDB">
(<strong>Remove Cloud Providers from the VMDB</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<h1 id="editing-a-cloud-provider">
<a class="anchor" href="#editing-a-cloud-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Editing a Cloud Provider</h1>

<p>Edit information about a provider such as the name, IP address, and
login credentials.</p>

<p><strong>Note:</strong></p>

<p>The <strong>Type</strong> value is unchangeable.</p>

<p>To use a different cloud provider, create a new one.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Click the cloud provider to edit.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> <strong>(Configuration)</strong>, and
then <img src="../images/1851.png" alt="Edit Selected Cloud Provider"> <strong>(Edit
Selected Cloud Provider)</strong>.</p>
  </li>
  <li>
    <p>Edit the <strong>Basic Information</strong>. This varies depending on the
<strong>Type</strong> of provider.</p>
  </li>
  <li>
    <p>Fill out the <strong>Credentials</strong> by typing in a <strong>Username</strong>,
<strong>Password</strong>, and a verification of this password (<strong>Confirm
Password</strong>).</p>

    <ul>
      <li>
        <p>If selecting <strong>Amazon EC2</strong>, generate an <strong>Access Key</strong> in the
<strong>Security Credentials</strong> of your Amazon AWS account. The
<strong>Access Key ID</strong> acts as your <strong>User ID</strong>, and your <strong>Secret
Access Key</strong> acts as your <strong>Password</strong>.</p>
      </li>
      <li>
        <p>If selecting <strong>OpenStack</strong>, use the <code class="language-plaintext highlighter-rouge">Keystone User ID</code> and
<code class="language-plaintext highlighter-rouge">Password</code> for your login credentials.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>If editing an OpenStack provider, use the <strong>AMQP</strong> subtab to provide
credentials required for the Advanced Message Queuing Protocol
service on your OpenStack Nova component.</p>
  </li>
  <li>
    <p>Click <strong>Validate</strong> and wait for notification of successful
validation.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h1 id="viewing-a-cloud-providers-timeline">
<a class="anchor" href="#viewing-a-cloud-providers-timeline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing a Cloud Provider’s Timeline</h1>

<p>View the timeline of events for instances registered to a cloud
provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Click the desired cloud provider for viewing the timeline.</p>
  </li>
  <li>
    <p>Click <img src="../images/1994.png" alt="Monitoring"> (<strong>Monitoring</strong>), and then
<img src="../images/1995.png" alt="Timelines"> (<strong>Timelines</strong>).</p>
  </li>
  <li>
    <p>From <strong>Options</strong>, customize the period of time to display and the
types of events to see.</p>

    <ul>
      <li>
        <p>Use <strong>Show</strong> to select regular Management Events or Policy
Events.</p>
      </li>
      <li>
        <p>Use the <strong>Type</strong> list to select hourly or daily data points.</p>
      </li>
      <li>
        <p>Use <strong>Date</strong> to type the date for the timeline to display.</p>
      </li>
      <li>
        <p>If you select to view a daily timeline, use <strong>Show</strong> to set how
many days back to go. The maximum history is 31 days.</p>
      </li>
      <li>
        <p>The three <strong>Event Groups</strong> list allow you to select different
groups of events to display. Each has its own color.</p>
      </li>
      <li>
        <p>From the <strong>Level</strong> list, select a <strong>Summary</strong> event, or a
<strong>Detail</strong> list of events.</p>
      </li>
    </ul>
  </li>
</ol>

<h2 id="ibm-power-systems-virtual-servers-providers">
<a class="anchor" href="#ibm-power-systems-virtual-servers-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>IBM Power Systems Virtual Servers Providers</h2>

<h1 id="ibm-power-systems-virtual-servers">
<a class="anchor" href="#ibm-power-systems-virtual-servers" aria-hidden="true"><span class="octicon octicon-link"></span></a>IBM Power Systems Virtual Servers</h1>

<p><a href="https://www.ibm.com/cloud/power-virtual-server">IBM Power Systems Virtual Servers</a>
is a Power Systems infrastructure as a service (IaaS) offering with
connectivity to the catalog of IBM Cloud Services that you can use to deploy a
virtual server, also known as a logical partition (LPAR), in a matter of
minutes. IBM Power Systems clients who have typically relied upon
on-premises-only infrastructure can now quickly and economically extend their
Power IT resources off-premises.</p>

<h1 id="adding-ibm-power-systems-virtual-servers-providers">
<a class="anchor" href="#adding-ibm-power-systems-virtual-servers-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding IBM Power Systems Virtual Servers Providers</h1>

<p>Complete the following procedure to add an IBM Power Systems Virtual Servers
cloud provider in ManageIQ.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Clouds &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then click
<img src="../images/1862.png" alt="1862"> (<strong>Add a New Cloud Provider</strong>).</p>
  </li>
  <li>
    <p>From the <strong>Type</strong> list, select <strong>IBM Power Systems Virtual Servers Providers</strong>.</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>Select the appropriate <strong>Zone</strong>.</p>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong>, in the <strong>Default</strong> tab.</p>

    <ol>
      <li>
        <p>Enter your <strong>IBM Cloud API Key</strong>.</p>

        <p>For more information on managing IBM Cloud API keys, including how to
create one, refer to IBM Cloud Docs:
<a href="https://cloud.ibm.com/docs/account?topic=account-userapikey">Managing user API keys</a></p>
      </li>
      <li>
        <p>Enter the <strong>PowerVS Service GUID</strong> of the IBM Power Systems Virtual
Servers service instance you want to add.</p>

        <p>You can easily copy the GUID from the
<a href="https://cloud.ibm.com/resources">IBM Cloud Resources</a> page, by selecting
“Services” and clicking on the whitespace of a PowerVS instance row.</p>

        <p><img src="../images/ibm_cloud_powervs_guid.png" alt="Power Systems Virtual Server GUID"></p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to validate the credentials.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<h1 id="network-managers">
<a class="anchor" href="#network-managers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Network Managers</h1>

<p>In ManageIQ, a network manager is an inventory of networking
entities on existing cloud and infrastructure providers managed by your
ManageIQ appliance.</p>

<p>This provider type exposes software-defined networking (SDN) providers
including <em>OpenStack Network (Neutron)</em>, <em>Azure Network</em>, and <em>Amazon
EC2 Network</em>, which enables software-defined networking inventory
collection. The OpenStack Network provider collects inventory of
floating IPs from OpenStack so that IPs can be allocated without
querying OpenStack database every time. Also, it refreshes all Neutron
data from both OpenStack and OpenStack Infrastructure, and extracts the
Neutron logic to a shared place. Note that management via the network
providers configuration is currently disabled.</p>

<p>This chapter describes the different types of network managers available
to ManageIQ, and how to manage them. Network managers are
discovered automatically by ManageIQ from other connected
providers.</p>

<h1 id="adding-or-viewing-network-providers">
<a class="anchor" href="#adding-or-viewing-network-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding or Viewing Network Providers</h1>

<p><strong>Note:</strong></p>

<p>All supported network providers — OpenStack Network, Azure Network, and
Amazon EC2 Network, are added or removed automatically upon adding or
removing the respective cloud provider.</p>

<p>Viewing network providers:</p>

<ol>
  <li>
    <p>Navigate to menu:Networks[Providers] to see a list of all network
providers, along with information such as <em>Name</em>, <em>Type</em>, <em>EVM
Zone</em>, <em>Number of Instances</em>, <em>Subnets</em>, and <em>Region</em>.</p>
  </li>
  <li>
    <p>Click on a provider from the list to view its summary screen.</p>
  </li>
</ol>

<p>Network providers summary:</p>

<p>The summary screen includes tables containing information on
<em>Properties</em>, <em>Status</em>, <em>Relationships</em>, <em>Overview</em>, and <em>Smart
Management</em>. Click on rows in the <em>Relationship</em> and <em>Overview</em> tables
to see detailed information for individual entities.</p>

<p>Accordion tabs in the sidebar provide access to <strong>Properties</strong> and
<strong>Relationships</strong> details.</p>

<p>Click on <strong>Reload</strong>, <strong>Configuration</strong>, <strong>Policy</strong>, and <strong>Monitoring</strong>
actions in the taskbar to manage the selected provider.</p>

<p><strong>Note:</strong></p>

<p>Alternatively, click on a cloud provider to see the cloud provider details and its relationships such as Network Manager, Tenants, Instances among others. In Relationships, click Network Manager to see
information about the network provider, and its relationship with the cloud provider, on the summary page.</p>

<h1 id="refreshing-network-providers">
<a class="anchor" href="#refreshing-network-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Refreshing Network Providers</h1>

<p>Refresh a network provider to find other resources related to it. Ensure
the selected network providers have the correct credentials before
refreshing.</p>

<ol>
  <li>
    <p>Navigate to menu:Networks[Providers].</p>
  </li>
  <li>
    <p>Select the network providers to refresh.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and
then <img src="../images/2003.png" alt="Refresh Relationships and Power States">
(<strong>Refresh Relationships and Power States</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<h1 id="tagging-network-providers">
<a class="anchor" href="#tagging-network-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagging Network Providers</h1>

<p>Apply tags to network providers to categorize them together at the same
time.</p>

<ol>
  <li>
    <p>Navigate to menu:Networks[Providers].</p>
  </li>
  <li>
    <p>Select the network providers to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/2158.png" alt="Edit
Tags"> (<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p><strong>Select a customer tag to assign</strong> from the first list.</p>
  </li>
  <li>
    <p>Select a value to assign from the second list.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h1 id="removing-network-providers">
<a class="anchor" href="#removing-network-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing Network Providers</h1>

<p>Although network providers are added or removed automatically upon
adding or removing the respective cloud provider, you can manually
remove a network provider if it is no longer in use. This will remove
the network provider from the VMDB and any relationship with the cloud
provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Networks[Providers].</p>
  </li>
  <li>
    <p>Click the network provider to remove.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and
then <img src="../images/2098.png" alt="Remove this Network Provider from the VMDB">
(<strong>Remove this Network Provider from the VMDB</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<h1 id="viewing-a-network-providers-timeline">
<a class="anchor" href="#viewing-a-network-providers-timeline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing a Network Provider’s Timeline</h1>

<p>View the timeline of events for instances registered to a network
provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Networks[Providers].</p>
  </li>
  <li>
    <p>Click the network provider you want to monitor the timeline for.</p>
  </li>
  <li>
    <p>Click <img src="../images/1994.png" alt="Monitoring"> (<strong>Monitoring</strong>), and then
<img src="../images/1995.png" alt="Timelines"> (<strong>Timelines</strong>).</p>
  </li>
  <li>
    <p>From <strong>Options</strong>, select the event type and interval, and customize
the period of time to display and the types of events to see.</p>

    <ul>
      <li>
        <p>Select <em>Management Events</em> or <em>Policy Events</em> from the <strong>Show</strong>
list.</p>
      </li>
      <li>
        <p>Select an <strong>Interval</strong> between <em>Hourly</em> and <em>Daily</em>.</p>
      </li>
      <li>
        <p>Select <strong>Date</strong>.</p>
      </li>
      <li>
        <p>If you selected <em>Daily</em> for <strong>Interval</strong>, set the number of days
in the past to see the event timeline for. The maximum is <em>31
days back</em>.</p>
      </li>
      <li>
        <p>Select <strong>Summary</strong> or <strong>Detail</strong> for <strong>Level</strong>.</p>
      </li>
      <li>
        <p>Select the required <strong>Event Groups</strong> from the lists you want to
monitor the timeline for.</p>
      </li>
    </ul>
  </li>
</ol>

<p>You can also assign policy profiles to network providers, or remove
them. The method for doing so is similar to that of any normal policy
profile.</p>

<h1 id="using-the-topology-widget-for-network-providers">
<a class="anchor" href="#using-the-topology-widget-for-network-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the Topology Widget for Network Providers</h1>

<p>The <strong>Topology</strong> widget is an interactive topology graph, showing the
status and relationships between the different entities of the network
providers that ManageIQ has access to.</p>

<p>The topology graph includes cloud subnets, virtual machines, security
groups, floating IP addresses, cloud networks, network routers, cloud
tenants, and tags within the overall network provider environment.</p>

<p>Each entity in the graph displays a color indication of its status:
green indicates an active entity, while red indicates inactivity or an
issue.</p>

<p><img src="../images/network_topology.png" alt="network topology"></p>

<ol>
  <li>
    <p>Navigate to menu:Networks[Topology].</p>
  </li>
  <li>
    <p>Click the desired network provider for viewing the provider summary.</p>
  </li>
</ol>

<p>Alternatively, you can open the topology widget from the provider
summary page by clicking <strong>Topology</strong> under <strong>Overview</strong>.</p>

<ul>
  <li>
    <p>Hovering over any individual graph element will display a summary of
details for the individual element.</p>
  </li>
  <li>
    <p>Double-click an entity in the graph to navigate to its summary page.</p>
  </li>
  <li>
    <p>Drag elements to reposition the graph.</p>
  </li>
  <li>
    <p>Click the symbols in the legend at the top of the graph to show or
hide entities.</p>
  </li>
  <li>
    <p>Click the <strong>Display Names</strong> checkbox to show or hide entity names.</p>
  </li>
  <li>
    <p>Click <strong>Refresh</strong> to refresh the display of the network provider
entities.</p>
  </li>
  <li>
    <p>Enter a search term in the <strong>Search</strong> box to locate an entity by
full or partial name.</p>
  </li>
</ul>

<h1 id="containers-providers">
<a class="anchor" href="#containers-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Containers Providers</h1>

<p>A containers provider is a service that manages container resources, that can be added to the ManageIQ appliance.</p>

<p>ManageIQ can connect to OpenShift Container Platform containers providers and manage them similarly to infrastructure and cloud providers. This allows you to gain control over different aspects of your containers environment and answer questions such as:</p>

<ul>
  <li>
    <p>How many containers exist in my environment?</p>
  </li>
  <li>
    <p>Does a specific node have enough resources?</p>
  </li>
  <li>
    <p>How many distinct images are used?</p>
  </li>
  <li>
    <p>Which image registries are used?</p>
  </li>
</ul>

<p>When ManageIQ connects to a container’s environment, it collects information on different areas of the environment:</p>

<ul>
  <li>
    <p>Entities such as pods, nodes, or services.</p>
  </li>
  <li>
    <p>Basic relationships between the entities, for example: Which services are serving which pods?</p>
  </li>
  <li>
    <p>Advanced insight into relationships, for example: Which two different containers are using the same image?</p>
  </li>
  <li>
    <p>Additional information, such as events, projects, routes, and metrics.</p>
  </li>
</ul>

<p>You can manage policies for containers entities by adding tags. All containers entities except volumes can be tagged.</p>

<p><strong>Note:</strong></p>

<p>This chapter provides details on managing containers providers. For details on working with the resources within a container environment, see <a href="../managing_infrastructure_and_inventory/index.html#container-entities">Container Entities</a> in <em>Managing Infrastructure and Inventory</em>.</p>

<p>The ManageIQ user interface uses virtual thumbnails to represent containers providers. Each thumbnail contains four quadrants
by default, which display basic information about each provider:</p>

<p><img src="../images/cp-quad-icon.png" alt="cp quad icon"></p>

<ol>
  <li>
    <p>Number of nodes</p>
  </li>
  <li>
    <p>Container provider software</p>
  </li>
  <li>
    <p>Power state</p>
  </li>
  <li>
    <p>Authentication status</p>
  </li>
</ol>

<table>
  <thead>
    <tr>
      <th>Icon</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="../images/2190.png" alt="2190"></td>
      <td>Validated: Valid authentication credentials have been added.</td>
    </tr>
    <tr>
      <td><img src="../images/2191.png" alt="2191"></td>
      <td>Invalid: Authentication credentials are invalid.</td>
    </tr>
    <tr>
      <td><img src="../images/2192.png" alt="2192"></td>
      <td>Unknown: Authentication status is unknown or no credentials have been entered.</td>
    </tr>
  </tbody>
</table>

<p>Containers provider authentication status</p>

<h2 id="obtaining-an-openshift-container-platform-management-token">
<a class="anchor" href="#obtaining-an-openshift-container-platform-management-token" aria-hidden="true"><span class="octicon octicon-link"></span></a>Obtaining an OpenShift Container Platform Management Token</h2>

<p>When deploying OpenShift using <code class="language-plaintext highlighter-rouge">openshift-ansible-3.0.20</code> (or later
versions), the OpenShift Container Platform <a href="https://docs.openshift.com/container-platform/4.5/authentication/understanding-and-creating-service-accounts.html">service account</a>
and <a href="https://docs.openshift.com/container-platform/4.5/authentication/understanding-and-creating-service-accounts.html#service-accounts-granting-roles_understanding-service-accounts">roles</a> required by ManageIQ are installed by default.</p>

<p><strong>Note:</strong></p>

<p>See the <a href="https://docs.openshift.com/container-platform/4.5/authentication/using-rbac.html#default-roles_using-rbac">OpenShift Container Platform documentation</a>
for a list of the default roles.</p>

<p>Run the following to obtain the token needed to add an OpenShift Container Platform provider:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># oc sa get-token -n management-infra management-admin
eyJhbGciOiJSUzI1NiI...
</code></pre></div></div>

<h2 id="enabling-openshift-cluster-metrics">
<a class="anchor" href="#enabling-openshift-cluster-metrics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling OpenShift Cluster Metrics</h2>

<p>Use the OpenShift Cluster Metrics plug-in to collect node, pod, and container metrics into one location. This helps track usage and find common issues.</p>

<ul>
  <li>
    <p>Configure ManageIQ to allow for all three <a href="../deployment_planning_guide/index.html#assigning-the-capacity-and-utilization-server-roles">Capacity &amp; Utilization server roles</a>.</p>
  </li>
  <li>
    <p>Enable cluster metrics using the <a href="https://access.redhat.com/documentation/en-us/openshift_container_platform/3.5/html-single/installation_and_configuration/#install-config-cluster-metrics">OpenShift Container Platform documentation</a>.</p>
  </li>
</ul>

<h1 id="adding-an-openshift-container-platform-provider">
<a class="anchor" href="#adding-an-openshift-container-platform-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding an OpenShift Container Platform Provider</h1>

<p>After initial installation and creation of a ManageIQ
environment, add an OpenShift Container Platform provider using the
token obtained in
<a href="#Obtaining_OpenShift_Container_Platform_Management_Token">???</a> and
following the procedure below.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Containers &gt; Providers].</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), then
click <img src="../images/1862.png" alt="Add a New Containers Provider"> (<strong>Add a New Containers Provider</strong>).</p>
  </li>
  <li>
    <p>Enter a <strong>Name</strong> for the provider.</p>
  </li>
  <li>
    <p>From the <strong>Type</strong> list, select <strong>OpenShift Container Platform</strong>.</p>
  </li>
  <li>
    <p>Enter the appropriate <strong>Zone</strong> for the provider. If you do not
specify a zone, it is set to <code class="language-plaintext highlighter-rouge">default</code>.</p>
  </li>
  <li>
    <p>From the <strong>Alerts</strong> list, select <strong>Prometheus</strong> to enable external
alerts. Selecting <strong>Prometheus</strong> adds an <strong>Alerts</strong> tab to the lower
pane to configure the Prometheus service. Alerts are disabled by
default.</p>
  </li>
  <li>
    <p>From the <strong>Metrics</strong> list, select <strong>Hawkular</strong> or <strong>Prometheus</strong> to
collect capacity and utilization data, or leave as <strong>Disabled</strong>.
Selecting <strong>Prometheus</strong> or <strong>Hawkular</strong> adds a <strong>Metrics</strong> tab to
the lower pane for further configuration. Metrics are disabled by
default.</p>
  </li>
  <li>
    <p>In the <strong>Default</strong> tab, configure the following for the OpenShift
provider:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to
authenticate the provider:</p>

        <ul>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted
Certificate Authority. Select this option if the provider
has a valid SSL certificate and it is signed by a trusted
Certificate Authority. No further configuration is required
for this option.</p>
          </li>
          <li>
            <p><strong>SSL trusting custom CA</strong>: Authenticate the provider with a
self-signed certificate. For this option, copy your
provider’s CA certificate to the <strong>Trusted CA
Certificates</strong> box in PEM format.</p>

            <p><strong>Note:</strong></p>

            <p>You can obtain your OpenShift Container Platform provider’s
CA certificate for all endpoints (default, metrics, alerts)
from <code class="language-plaintext highlighter-rouge">/etc/origin/master/ca.crt</code>. Paste the output (a block
of text starting with <code class="language-plaintext highlighter-rouge">-----BEGIN CERTIFICATE-----</code>) into
the <strong>Trusted CA Certificates</strong> field.</p>
          </li>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider
insecurely (not recommended).</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Enter the <strong>Hostname</strong> (or IPv4 or IPv6 address) of the provider.</p>

        <p><strong>Important:</strong></p>

        <p>The <strong>Hostname</strong> must use a unique fully qualified domain name.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> of the provider. The default port is
<code class="language-plaintext highlighter-rouge">8443</code>.</p>
      </li>
      <li>
        <p>Enter a token for your provider in the <strong>Token</strong> box.</p>

        <p><strong>Note:</strong></p>

        <p>To obtain a token for your provider, run the <code class="language-plaintext highlighter-rouge">oc get secret</code> command on your provider; see <a href="../managing_providers/index.html#obtaining-an-openshift-container-platform-management-token">Obtaining an OpenShift Container Platform Management Token</a>.</p>

        <p>For example:</p>

        <p># oc get secret –namespace management-infra
management-admin-token-8ixxs –template=’’ | base64 –decode</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm that ManageIQ can connect
to the OpenShift Container Platform provider.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>For the <strong>Prometheus</strong> alerts service, add the Prometheus alerts
endpoint in the <strong>Alerts</strong> tab:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to
authenticate the service:</p>

        <ul>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted
Certificate Authority. Select this option if the provider
has a valid SSL certificate and it is signed by a trusted
Certificate Authority. No further configuration is required
for this option.</p>
          </li>
          <li>
            <p><strong>SSL trusting custom CA</strong>: Authenticate the provider with a
self-signed certificate. For this option, copy your
provider’s CA certificate to the <strong>Trusted CA
Certificates</strong> box in PEM format.</p>
          </li>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider
insecurely using SSL. (Not recommended)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Enter the <strong>Hostname</strong> (or IPv4 or IPv6 address) or alert
<strong>Route</strong>.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> if your Prometheus provider uses a
non-standard port for access. The default port is <code class="language-plaintext highlighter-rouge">443</code>.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm that ManageIQ can
connect to the alerts service.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>If you selected a metrics service, configure the service details in
the <strong>Metrics</strong> tab:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to
authenticate the service:</p>

        <ul>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted
Certificate Authority. Select this option if the provider
has a valid SSL certificate and it is signed by a trusted
Certificate Authority. No further configuration is required
for this option.</p>
          </li>
          <li>
            <p><strong>SSL trusting custom CA</strong>: Authenticate the provider with a
self-signed certificate. For this option, copy your
provider’s CA certificate to the <strong>Trusted CA
Certificates</strong> box in PEM format.</p>

            <p><strong>Note:</strong></p>

            <p>In OpenShift, the default deployment of the router generates
certificates during installation, which can be used with the
<strong>SSL trusting custom CA</strong> option. Connecting a Hawkular
endpoint with this option requires the CA certificate that
the cluster uses for service certificates, which is stored
in <code class="language-plaintext highlighter-rouge">/etc/origin/master/service-signer.crt</code> on the first
master in a cluster.</p>
          </li>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider
insecurely using SSL. (Not recommended)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Enter the <strong>Hostname</strong> (or IPv4 or IPv6 address) of the
provider, or use the <strong>Detect</strong> button to find the hostname.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> if your Hawkular or Prometheus provider
uses a non-standard port for access. The default port is <code class="language-plaintext highlighter-rouge">443</code>.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm that ManageIQ can connect
to the metrics endpoint.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click the <strong>Advanced</strong> tab to add image inspector settings for
scanning container images on your provider using OpenSCAP.</p>

    <p><strong>Note:</strong></p>

    <ul>
      <li>
        <p>These settings control downloading the image inspector container
image from the registry and obtaining the Common Vulnerabilities
and Exposures (CVE) information (for effective scanning) via a
proxy.</p>
      </li>
      <li>
        <p>CVE URL that ManageIQ requires to be open for
OpenSCAP scanning:
<a href="https://www.redhat.com/security/data/metrics/ds/">https://www.redhat.com/security/data/metrics/ds/</a>. This
information is based on the source code of OpenSCAP.</p>
      </li>
    </ul>

    <ol>
      <li>
        <p>Enter the proxy information for the provider in either <strong>HTTP</strong>,
<strong>HTTPS</strong>, or <strong>NO Proxy</strong> depending on your environment.</p>
      </li>
      <li>
        <p>Enter the <strong>Image-Inspector Repository</strong> information. For
example, <code class="language-plaintext highlighter-rouge">openshift3/image-inspector</code>.</p>
      </li>
      <li>
        <p>Enter the <strong>Image-Inspector Registry</strong> information. For example,
<code class="language-plaintext highlighter-rouge">registry.access.redhat.com</code>.</p>
      </li>
      <li>
        <p>Enter the <strong>Image-Inspector Tag</strong> value. A tag is a mark used to
differentiate images in a repository, typically by the
application version stored in the image.</p>
      </li>
      <li>
        <p>Enter <code class="language-plaintext highlighter-rouge">https://www.redhat.com/security/data/metrics/ds/</code> in
<strong>CVE location</strong>.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Click <strong>Add</strong>.</p>
  </li>
</ol>

<p><strong>Note:</strong></p>

<p>You can also set global default image-inspector settings for all
OpenShift providers in the advanced settings menu by editing the values
under <code class="language-plaintext highlighter-rouge">ems_kubernetes</code>, instead of setting this for each provider.</p>

<p>For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:image_inspector_registry: registry.access.redhat.com
:image_inspector_repository: openshift3/image-inspector
</code></pre></div></div>

<h1 id="tagging-containers-providers">
<a class="anchor" href="#tagging-containers-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tagging Containers Providers</h1>

<p>Apply tags to all containers providers to categorize them together at
the same time.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Containers &gt; Providers].</p>
  </li>
  <li>
    <p>Select the checkboxes for the containers providers to tag.</p>
  </li>
  <li>
    <p>Click <img src="../images/1941.png" alt="Policy"> (<strong>Policy</strong>), and then <img src="../images/1851.png" alt="Edit
Tags">(<strong>Edit Tags</strong>).</p>
  </li>
  <li>
    <p>Select a tag to assign from the drop-down menu.</p>

    <p><img src="../images/2219.png" alt="2219"></p>
  </li>
  <li>
    <p>Select a value to assign.</p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h1 id="removing-containers-providers">
<a class="anchor" href="#removing-containers-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing Containers Providers</h1>

<p>You may want to remove a containers provider from the VMDB if the
provider is no longer in use.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Containers &gt; Providers].</p>
  </li>
  <li>
    <p>Select the checkboxes for the containers providers to remove.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and
then <img src="../images/2098.png" alt="Remove Containers Providers from the VMDB">
(<strong>Remove Containers Providers from Inventory</strong>).</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
</ol>

<h1 id="editing-a-containers-provider">
<a class="anchor" href="#editing-a-containers-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Editing a Containers Provider</h1>

<p>Edit information about a provider such as the name, hostname, IP address or port, and credentials as required. If you have just upgraded your ManageIQ environment from an older version, edit the provider to specify the authentication method the provider uses to connect to ManageIQ.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Containers &gt; Providers].</p>
  </li>
  <li>
    <p>Click the containers provider to edit.</p>
  </li>
  <li>
    <p>Click <img src="../images/1847.png" alt="Configuration"> (<strong>Configuration</strong>), and then <img src="../images/1851.png" alt="Edit Selected Containers Provider"> (<strong>Edit Selected Containers Provider</strong>).</p>
  </li>
  <li>
    <p>Edit the <strong>Name</strong> if required.</p>

    <p><strong>Note:</strong></p>

    <p>The <strong>Type</strong> value is unchangeable.</p>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong> in the <strong>Default</strong> tab, edit the following as required:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to authenticate the provider:</p>

        <ul>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted Certificate Authority. Select this option if the provider has a valid SSL certificate and it is signed by a trusted Certificate Authority. No further configuration is required for this option.</p>
          </li>
          <li>
            <p><strong>SSL trusting custom CA</strong>: Authenticate the provider with a self-signed certificate. For this option, copy your provider’s CA certificate to the <strong>Trusted CA Certificates</strong> box in PEM format.</p>

            <p><strong>Note:</strong></p>

            <p>You can obtain your OpenShift Container Platform provider’s CA certificate for all endpoints (default, metrics, alerts)
from <code class="language-plaintext highlighter-rouge">/etc/origin/master/ca.crt</code>. Paste the output (a block of text starting with <code class="language-plaintext highlighter-rouge">-----BEGIN CERTIFICATE-----</code>) into
the <strong>Trusted CA Certificates</strong> field.</p>
          </li>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider insecurely (not recommended).</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Enter the <strong>Hostname</strong> (or IPv4 or IPv6 address) of the provider.</p>

        <p><strong>Important:</strong></p>

        <p>The <strong>Hostname</strong> must use a unique fully qualified domain name.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> of the provider. The default port is <code class="language-plaintext highlighter-rouge">8443</code>.</p>
      </li>
      <li>
        <p>Enter a token for your provider in the <strong>Token</strong> box.</p>

        <p><strong>Note:</strong></p>

        <p>To obtain a token for your provider, run the <code class="language-plaintext highlighter-rouge">oc get secret</code> command on your provider; see <a href="../managing_providers/index.html#obtaining-an-openshift-container-platform-management-token">Obtaining an OpenShift Container Platform Management Token</a>.</p>

        <p>For example:</p>

        <p># oc get secret –namespace management-infra
management-admin-token-8ixxs –template=’’ | base64 –decode</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm that ManageIQ can connect to the OpenShift Container Platform provider.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong> in the <strong>Metrics</strong> tab, configure the following for gathering capacity and utilization metrics for Hawkular or Prometheus based on the selection:</p>

    <ol>
      <li>
        <p>Select a <strong>Security Protocol</strong> method to specify how to authenticate the provider:</p>

        <ul>
          <li>
            <p><strong>SSL</strong>: Authenticate the provider securely using a trusted Certificate Authority. Select this option if the provider has a valid SSL certificate and it is signed by a trusted
Certificate Authority. No further configuration is required for this option.</p>
          </li>
          <li>
            <p><strong>SSL trusting custom CA</strong>: Authenticate the provider with a self-signed certificate. For this option, copy your provider’s CA certificate to the <strong>Trusted CA Certificates</strong> box in PEM format.</p>
          </li>
          <li>
            <p><strong>SSL without validation</strong>: Authenticate the provider insecurely using SSL. (Not recommended)</p>
          </li>
        </ul>
      </li>
      <li>
        <p>Enter the <strong>Hostname</strong> (or IPv4 or IPv6 address) of the provider.</p>
      </li>
      <li>
        <p>Enter the <strong>API Port</strong> if your provider uses a non-standard port for access. The default port is <code class="language-plaintext highlighter-rouge">443</code>.</p>
      </li>
      <li>
        <p>Click <strong>Validate</strong> to confirm that ManageIQ can connect to the endpoint.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Under <strong>Endpoints</strong> in the <strong>Alerts</strong> tab, configure the following for Prometheus alerting from the cluster.</p>

    <ul>
      <li>
        <p><strong>SSL</strong>: Authenticate the provider securely using a trusted Certificate Authority. Select this option if the provider has a valid SSL certificate and it is signed by a trusted Certificate Authority. No further configuration is required for this option.</p>
      </li>
      <li>
        <p><strong>SSL trusting custom CA</strong>: Authenticate the provider with a self-signed certificate. For this option, copy your provider’s CA certificate to the <strong>Trusted CA Certificates</strong> box in PEM format.</p>
      </li>
      <li>
        <p><strong>SSL without validation</strong>: Authenticate the provider insecurely using SSL. (Not recommended)</p>

        <ol>
          <li>
            <p>Enter the <strong>Hostname</strong> (or IPv4 or IPv6 address) of the provider.</p>
          </li>
          <li>
            <p>Enter the <strong>API Port</strong> if your provider uses a non-standard port for access. The default port is <code class="language-plaintext highlighter-rouge">443</code>.</p>
          </li>
          <li>
            <p>Click <strong>Validate</strong> to confirm that ManageIQ can connect to the endpoint.</p>
          </li>
        </ol>
      </li>
    </ul>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<h1 id="hiding-environment-variables-for-containers-providers">
<a class="anchor" href="#hiding-environment-variables-for-containers-providers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hiding Environment Variables for Containers Providers</h1>

<p>You can restrict users from viewing container provider environment
variables by configuring user roles.</p>

<p>This is useful as the environment variables panel can expose sensitive
information, such as passwords, that you may not want certain users to
view.</p>

<p><strong>Note:</strong></p>

<p>The default user roles in ManageIQ are read-only. To customize a role’s settings, create a new role or a copy of an existing
role.</p>

<p>You can view role information and the product features the role can access (marked by a checkmark) by clicking on any role in <strong>Access Control</strong>. Expand the categories under <strong>Product Features</strong> to see further detail.</p>

<p>To configure user access to container environment variables:</p>

<ol>
  <li>
    <p>Click <img src="../images/config-gear.png" alt="config gear"> (<strong>Configuration</strong>).</p>
  </li>
  <li>
    <p>Click the <strong>Access Control</strong> accordion, then click <strong>Roles</strong>.</p>
  </li>
  <li>
    <p>Select a existing custom role from the <strong>Access Control Roles</strong> list, and click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then <img src="../images/1851.png" alt="1851"> (<strong>Edit the selected Role</strong>).</p>

    <p>Alternatively, to create a new custom role, select a role from the <strong>Access Control Roles</strong> list, and click <img src="../images/1847.png" alt="1847"> (<strong>Configuration</strong>), then <img src="../images/1851.png" alt="1851"> (<strong>Copy this Role to a new Role</strong>).</p>
  </li>
  <li>
    <p>Edit the name for the role if desired.</p>
  </li>
  <li>
    <p>For <strong>Access Restriction for Services, VMs, and Templates</strong>, select if you want to limit users with this role to only see resources owned by the user or their group, owned by the user, or all resources (<strong>None</strong>).</p>
  </li>
  <li>
    <p>Expand the <strong>Product Features (Editing)</strong> tree options to show menu:Everything[Compute &gt; Containers &gt; Containers Explorer &gt; All
Containers &gt; View Containers].</p>
  </li>
  <li>
    <p>Clear the <strong>Environment Variables</strong> checkbox to restrict the user role from viewing container environment variables.</p>

    <p><img src="../images/restrict_env_vars.png" alt="restrict env vars"></p>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>
  </li>
</ol>

<p>For more information about user roles, see <a href="../general_configuration/index.html#roles">Roles</a> in <em>General Configuration</em>.</p>

<h1 id="viewing-a-containers-providers-timeline">
<a class="anchor" href="#viewing-a-containers-providers-timeline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing a Containers Provider’s Timeline</h1>

<p>View the timeline of events for instances registered to a containers
provider.</p>

<ol>
  <li>
    <p>Navigate to menu:Compute[Containers &gt; Providers].</p>
  </li>
  <li>
    <p>Click the desired containers provider for viewing the timeline.</p>
  </li>
  <li>
    <p>Click <img src="../images/1994.png" alt="Monitoring"> (<strong>Monitoring</strong>), and then
<img src="../images/1995.png" alt="Timelines"> (<strong>Timelines</strong>).</p>
  </li>
  <li>
    <p>From <strong>Options</strong>, customize the period of time to display and the
types of events to see.</p>

    <ul>
      <li>
        <p>Use <strong>Show</strong> to select regular Management Events or Policy
Events.</p>
      </li>
      <li>
        <p>Use the <strong>Interval</strong> dropdown to select hourly or daily data
points.</p>
      </li>
      <li>
        <p>Use <strong>Date</strong> to type the date for the timeline to display.</p>
      </li>
      <li>
        <p>If you select to view a daily timeline, use <strong>Show</strong> to set how
many days back to go. The maximum history is 31 days.</p>
      </li>
      <li>
        <p>From the <strong>Level</strong> dropdown, select a <strong>Summary</strong> event, or a
<strong>Detail</strong> list of events.</p>
      </li>
      <li>
        <p>The three <strong>Event Groups</strong> dropdowns allow you to select
different groups of events to display. Each has its own color.</p>
      </li>
    </ul>
  </li>
</ol>

<p>Click on an item for more detailed information.</p>

<h1 id="storage-managers">
<a class="anchor" href="#storage-managers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Storage Managers</h1>

<p>In ManageIQ, a storage manager is a service providing storage
resources that you can manage from a ManageIQ appliance. This
chapter describes the different types of storage managers used by
ManageIQ, and how they are added to ManageIQ.</p>

<p>There are three types of storage managers currently available to
ManageIQ:</p>

<ul>
  <li>
    <p>Amazon Elastic Block Store</p>
  </li>
  <li>
    <p>OpenStack Block Storage (<code class="language-plaintext highlighter-rouge">openstack-cinder</code>)</p>
  </li>
  <li>
    <p>OpenStack Object Storage (<code class="language-plaintext highlighter-rouge">openstack-swift</code>)</p>
  </li>
</ul>

<h2 id="amazon-elastic-block-store-managers">
<a class="anchor" href="#amazon-elastic-block-store-managers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Amazon Elastic Block Store Managers</h2>

<p>The Amazon Elastic Block Store service provides and manages persistent
block storage resources that Amazon EC2 instances can consume.</p>

<p>To use the Amazon Elastic Block Store service as a storage manager, you
must first add an Amazon EC2 cloud provider to your ManageIQ
appliance. The Amazon Elastic Block Store service is automatically
discovered by ManageIQ, and added to the <strong>Storage Managers</strong>
list. See <a href="#adding-amazon-ec2-providers">???</a> for instructions on adding
an Amazon EC2 cloud provider.</p>

<h2 id="openstack-block-storage-managers">
<a class="anchor" href="#openstack-block-storage-managers" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenStack Block Storage Managers</h2>

<p>The OpenStack Block Storage service (<code class="language-plaintext highlighter-rouge">openstack-cinder</code>) provides and
manages persistent block storage resources that OpenStack infrastructure
instances can consume.</p>

<p>To use OpenStack Block Storage as a storage manager, you must first add
an OpenStack cloud provider to your ManageIQ appliance and enable
events. The Block Storage service will be automatically discovered by
ManageIQ and added to the <strong>Storage Managers</strong> list in
ManageIQ. See <a href="#adding_openstack_cloud_providers">???</a> for
instructions on adding a cloud provider and enabling events.</p>

<h2 id="openstack-block-storage-manager-targeted-refresh">
<a class="anchor" href="#openstack-block-storage-manager-targeted-refresh" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenStack Block Storage Manager Targeted Refresh</h2>

<p>ManageIQ supports targeted refresh of OpenStack Block Storage
(Cinder) volumes. This functionality automatically pulls down new
inventory data for an object when ManageIQ receives an
event from the OpenStack provider. For example, if
ManageIQ receives a <code class="language-plaintext highlighter-rouge">volume.update.end</code> event from Cinder,
instead of refreshing the entire inventory, it performs a targeted
refresh of the volume referenced in the event.</p>

<h2 id="openstack-object-storage-managers">
<a class="anchor" href="#openstack-object-storage-managers" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenStack Object Storage Managers</h2>

<p>The OpenStack Object Storage (<code class="language-plaintext highlighter-rouge">openstack-swift</code>) service provides cloud
object storage.</p>

<p>To use the OpenStack Object Storage service as a storage manager, you
must first add an OpenStack cloud provider to your ManageIQ
appliance and enable events. The Object Storage service will be
automatically discovered by ManageIQ and added to the <strong>Storage
Managers</strong> list in ManageIQ. See
<a href="#adding_openstack_cloud_providers">???</a> for instructions on adding a
cloud provider and enabling events.</p>

<h1 id="viewing-object-stores">
<a class="anchor" href="#viewing-object-stores" aria-hidden="true"><span class="octicon octicon-link"></span></a>Viewing Object Stores</h1>

<p>The object store summary page shows details including the object store’s
size, parent cloud, storage manager, cloud tenant, and the number of
cloud objects on the object store.</p>

<p>In ManageIQ, view object stores on a object storage manager by
following these steps:</p>

<ol>
  <li>
    <p>Navigate to menu:Storage[Object Stores] to display a list of
object store containers.</p>
  </li>
  <li>
    <p>Click a container to open a summary page for that object store
container.</p>
  </li>
  <li>
    <p>Click <strong>Cloud Objects</strong> to view a list of object stores in the
object store container.</p>
  </li>
  <li>
    <p>Click an object store from the list to view the object store’s
summary page.</p>
  </li>
</ol>

<h1 id="appendix">
<a class="anchor" href="#appendix" aria-hidden="true"><span class="octicon octicon-link"></span></a>Appendix</h1>

<h2 id="using-a-self-signed-ca-certificate">
<a class="anchor" href="#using-a-self-signed-ca-certificate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using a Self-Signed CA Certificate</h2>

<p>Adding a self-signed Certificate Authority (CA) certificate for SSL authentication requires more configuration on OpenStack Platform and Microsoft System Center Virtual Machine Manager (SCVMM) providers.</p>

<p><strong>Note</strong>: This procedure is not required for OpenShift Container Platform, Red Hat Virtualization, or middleware manager providers, which have the option to select <strong>SSL trusting custom CA</strong> as a <strong>Security Protocol</strong> in the user interface. These steps are needed only for providers without this option in the user interface.</p>

<p>Before adding the provider, configure the following:</p>

<ol>
  <li>
    <p>Copy your provider’s CA certificate in PEM format to <code class="language-plaintext highlighter-rouge">/etc/pki/ca-trust/source/anchors/</code> on your ManageIQ appliance.</p>
  </li>
  <li>
    <p>Update the trust settings on the appliance:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> # update-ca-trust
</code></pre></div>    </div>
  </li>
  <li>
    <p>Restart the EVM processes on the server:</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code> # rake evm:restart
</code></pre></div>    </div>
  </li>
</ol>

<p>The CA certificate is added to the appliance, and you can add the provider to ManageIQ.</p>



      </div>
    </article>
  </div>
</div>

    </main>

    <footer class="site-footer">
  <div class="footer-row" id="footer_top">
    <div class="footer-group">
      <img class="footer-logo" src="/assets/images/manageiq-glyph-inverse.svg" alt="ManageIQ">
      <ul class="site_nav">
  <li >
    <a href="/download/">Download</a>
  </li>
  <li >
    <a href="/docs/">Documentation</a>
  </li>
  <li >
    <a href="/community/">Community</a>
  </li>
  <li >
    <a href="/blog/">Blog</a>
  </li>
</ul>

    </div>


    <ul class="contact_menu">
      <li>
        <a href="https://github.com/ManageIQ/">
          <i class="fa fa-github"></i>
          Github
        </a>
      </li>
      <li>
        <a href="https://gitter.im/ManageIQ/manageiq">
          <i class="fa fa-gitter">
            <svg viewBox="45 47 78 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 40.1 (33804) - http://www.bohemiancoding.com/sketch -->
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(45.000000, 47.000000)">
        <g id="icon-gitter" transform="translate(10.000000, 0.000000)">
            <rect id="Rectangle-path" x="0" y="0.5" width="8.25" height="61"></rect>
            <rect id="Rectangle-path" x="49.75" y="14.5" width="8.25" height="47"></rect>
            <rect id="Rectangle-path" x="16.5" y="14.5" width="8.25" height="80.25"></rect>
            <rect id="Rectangle-path" x="33.25" y="14.5" width="8.25" height="80.25"></rect>
        </g>
    </g>
</svg>

          </i>
          Gitter
        </a>
      </li>
      <li>
        <a href="http://talk.manageiq.org/">
          <i class="fa fa-comments"></i>
          Forum
        </a>
      </li>
      
    </ul>
  </div>

  <div class="footer-row" id="footer_bottom">
    <div class="footer-legal">
      <span class="copyright">
        &copy; 2020 ManageIQ.
      </span>
      <span>
        <a href="http://community.redhat.com/software/" target="_blank">
          Sponsored by Red Hat, Inc.
        </a>
      </span>
      <span>
        <a href="/logo/" class="footer-link">Logo</a>
      </span>
      <span>
        <a href="/security/" class="footer-link">Security</a>
      </span>
      <span>
        <a href="/legal/" class="footer-link">Legal &amp; Privacy</a>
      </span>
    </div>

    <div class="footer-social">
      <ul class="social_menu">
        <li>
          <a href="https://twitter.com/ManageIQ" class="social_link social_link-twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>

        <li>
          <a href="https://www.facebook.com/manageiq/" class="social_link social_link-facebook">
            <span class="social_link-icon">
              <i class="fa fa-facebook"></i>
            </span>
          </a>
        </li>

        <!--  -->
        <li>
          <a href="https://www.linkedin.com/company/manageiq" class="social_link social_link-linkedin">
            <span class="social_link-icon">
              <i class="fa fa-linkedin"></i>
            </span>
          </a>
        </li>

        <li>
          <a href="https://www.youtube.com/user/ManageIQVideo" class="social_link social_link-youtube">
            <span class="social_link-icon">
              <i class="fa fa-youtube"></i>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

    <div id="lightbox">
  <header class="lightbox-header">
    <div class="lightbox-title"></div>
    <div class="lightbox-close">
      <span class="fa fa-times"></span>
    </div>
  </header>

  <div class="lightbox-image">
    <img src="" alt="">
  </div>
</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="/assets/js/main.js" charset="utf-8"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58883457-1', 'auto');
  ga('send', 'pageview');

</script>
    
  </body>
</html>
